# リリースノート v1.0.19

## 📅 リリース日
**2026-02-15**

## 🎯 概要
デマーシアゲームのルール説明を改善し、配信者向けソロプレイモードをルーム作成画面から選択できるようになりました。VALORANTバージョンにも完全対応しています。

## ✨ 新機能

### 1. ソロプレイモードの UI 改善
**追加内容**:
- ルーム作成画面にソロプレイモードのチェックボックスを追加
- デマーシアモード選択時のみ表示されるように改善
- LOL版とVALORANT版の両方に対応

**表示条件**:
- ゲームモード: デマーシアに心を込めて
- ゲームタイプ: LOL または VALORANT

**機能**:
```
[ ] ソロプレイモード（配信者向け）
    配信者が演技、視聴者がコメントで回答する形式です
```

### 2. ソロプレイフローの改善
**フロー**:
1. セリフ表示画面（キャラクター名追加）
2. シチュエーション確認画面（視聴者には非表示）
3. 演技実施
4. 6択から正解を選択
5. 結果発表

**VALORANTバージョン対応**:
- `window.getRandomDemaciaPhrase(gameType)` を使用
- LOL/VALORANTを自動判定
- データ構造の統一

## 🔧 改善

### 修正 #1: ルール説明から不要な記述を削除
**Before**:
```
【デマーシアに心を込めて - ルール】

「はぁって言うゲーム」のLeague of Legendsバージョン！

1. 有名なセリフが1つ選ばれます
...
```

**After**:
```
【デマーシアに心を込めて - ルール】

1. 有名なセリフが1つ選ばれます
   例：「デマーシアァァァァ！」「僕が悪いんだ」など

2. ランダムで1人が「演技者」になります
...
```

**変更箇所**:
- `js/main.js` の `showRules()` 関数
- `README.md` のゲーム説明

### 修正 #2: ソロプレイモードの実装修正
**修正内容**:
- `demacia-solo.js` の重複コードを削除
- `window.getRandomDemaciaPhrase()` を使用するように変更
- VALORANTデータを正しく読み込むように修正

**Before**:
```javascript
// demacia-solo.js内で独自実装
const phrases = gameType === 'lol' ? demaciaData.phrases.lol : demaciaData.phrases.valorant;
```

**After**:
```javascript
// demacia-data.jsの関数を使用
soloCurrentPhrase = window.getRandomDemaciaPhrase(selectedGameType);
```

### 修正 #3: UI の表示制御
**ワードウルフモード時**:
- ソロプレイモード: **非表示**
- カテゴリー選択: 表示
- 検討時間: 表示
- プレイ人数: 表示

**デマーシアモード時**:
- ソロプレイモード: **表示**
- ジャンル選択: 表示
- 検討時間: 非表示
- プレイ人数: 非表示

## 📦 変更されたファイル

### JavaScript
- `js/main.js` (+20行, -10行)
  - `selectGame()` でソロプレイモード表示制御追加
  - `showRules()` でルール説明修正
  
- `js/demacia-solo.js` (+10行, -20行)
  - 重複コード削除
  - `window.getRandomDemaciaPhrase()` 使用
  - キャラクター名表示追加
  
- `js/version.js` (+1行, -1行)
  - バージョン番号更新: 1.0.18 → 1.0.19

### HTML
- `index.html` (+1行)
  - ソロプレイ画面にキャラクター名表示要素追加

### ドキュメント
- `README.md` (更新)
  - ゲーム説明から不要な記述を削除
  
- `RELEASE_NOTES_v1.0.19.md` (新規作成)
- `IMPLEMENTATION_SUMMARY_v1.0.19.md` (新規作成)

## 🧪 テスト手順

### 1. ソロプレイモード（LOL版）
```
1. ゲームモード: デマーシアに心を込めて
2. ゲームタイプ: LOL
3. ルーム作成画面で「ソロプレイモード」チェックボックスが表示されることを確認
4. チェックを入れて「ルーム作成」
5. セリフとキャラクター名が表示されることを確認
6. シチュエーション確認 → 演技 → 回答選択 → 結果発表
```

### 2. ソロプレイモード（VALORANT版）
```
1. ゲームモード: デマーシアに心を込めて
2. ゲームタイプ: VALORANT
3. ルーム作成画面で「ソロプレイモード」チェックボックスが表示されることを確認
4. チェックを入れて「ルーム作成」
5. VALORANTのセリフが表示されることを確認
   例：「Sage、復活！」「オーディン買え！」など
6. フローが正常に動作することを確認
```

### 3. ワードウルフモード
```
1. ゲームモード: ワードウルフ
2. ゲームタイプ: LOL / VALORANT / TFT
3. ルーム作成画面で「ソロプレイモード」チェックボックスが**表示されない**ことを確認
```

### 4. ルール説明
```
1. ホーム画面で「ルール説明」をクリック
2. デマーシアモードで「はぁって言うゲーム」の記述が**無い**ことを確認
3. ルールが簡潔に説明されていることを確認
```

## 📊 Before / After 比較

### ルール説明
| Before (v1.0.18) | After (v1.0.19) |
|------------------|-----------------|
| 「はぁって言うゲーム」の○○バージョン！ | （記述なし） |
| ルールが冗長 | シンプルで分かりやすい |

### ソロプレイモード選択
| Before (v1.0.18) | After (v1.0.19) |
|------------------|-----------------|
| ソロプレイ選択方法が不明 | ルーム作成画面でチェックボックス選択 |
| LOLのみ対応 | LOL/VALORANT両対応 |

## 🎯 使用例

### 配信者向けソロプレイ
```
配信者: デマーシアに心を込めてを選択
     → LOLまたはVALORANTを選択
     → ルーム作成画面で「ソロプレイモード」にチェック
     → ルーム作成

配信中:
1. セリフ表示（視聴者に見せる）
2. シチュエーション確認（視聴者には見せない！）
3. 演技する
4. 視聴者がコメントで回答
5. 6択から正解を選択
6. 結果発表（正解のシチュエーションを表示）
```

### 通常のマルチプレイ
```
プレイヤー: デマーシアに心を込めてを選択
         → LOLまたはVALORANTを選択
         → ルーム作成画面で「ソロプレイモード」にチェック**しない**
         → ルーム作成
         → 友達を招待してプレイ
```

## ⚠️ 重要な注意事項

### データ読み込み順序
以下のスクリプトが正しい順序で読み込まれている必要があります：
```html
<script src="js/demacia-data.js"></script>
<script src="js/demacia-data-valorant.js"></script>
<script src="js/demacia-solo.js"></script>
<script src="js/main.js"></script>
```

### ソロプレイモードの制限
- オンライン対戦には対応していません
- スコア計算はありません
- 配信者が自己採点する形式です

## 🚀 アップグレード手順

### 自動アップグレード
1. ページをリロード（Ctrl/Cmd + Shift + R）
2. バージョン 1.0.19 が自動的に適用されます
3. キャッシュが自動クリアされます

### 手動確認
```javascript
// ブラウザのコンソールで実行
getAppVersion() // → "1.0.19" が返されることを確認
```

## 🔍 既知の問題

なし

## 📝 今後の予定

### v1.0.20 (予定)
- [ ] ソロプレイモードのスコア表示機能
- [ ] 連続プレイ時の統計表示
- [ ] 難易度別の正解率表示

### 将来のアップデート
- [ ] ソロプレイモードのカスタマイズ機能
- [ ] 配信用オーバーレイ機能
- [ ] セリフのお気に入り機能

## 📚 関連ドキュメント

- `IMPLEMENTATION_SUMMARY_v1.0.19.md` - 実装サマリー
- `README.md` - プロジェクト全体の説明
- `DEMACIA_VOTING_SYSTEM.md` - デマーシア投票システムガイド
- `DEMACIA_OBJECT_DISPLAY_FIX_v1.0.18.md` - 前回の修正内容

## 🎯 統計

### コード変更
- **追加**: 31行
- **削除**: 30行
- **変更**: 4ファイル
- **合計差分**: +1行

### 影響範囲
- **ルール説明**: 改善 ✅
- **ソロプレイUI**: 大幅改善 ✅
- **VALORANT対応**: 完全対応 ✅
- **コード品質**: 向上 ✅

## 👥 貢献者

- AI Assistant (実装)
- ユーザーフィードバック (要望)

## 🙏 謝辞

ソロプレイモードの UI 改善要望をいただいたユーザーの皆様に感謝いたします。
このフィードバックにより、配信者にとってより使いやすい機能になりました。

---

**バージョン**: v1.0.19  
**リリース日**: 2026-02-15  
**ステータス**: 安定版 ✅  
**推奨アクション**: 即座にアップグレード
