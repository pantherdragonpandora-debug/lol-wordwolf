# ğŸ“Š ãƒšãƒ¼ã‚¸ãƒ“ãƒ¥ãƒ¼ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼å®Ÿè£…ã‚¬ã‚¤ãƒ‰ - v1.0.22

**å®Ÿè£…æ—¥**: 2026-02-15  
**æ©Ÿèƒ½**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒšãƒ¼ã‚¸ãƒ“ãƒ¥ãƒ¼æ•°è¡¨ç¤º

---

## ğŸ“‹ æ¦‚è¦

Firebase Realtime Databaseã‚’ä½¿ç”¨ã—ã¦ã€ã‚µã‚¤ãƒˆã®è¨ªå•è€…æ•°ï¼ˆãƒšãƒ¼ã‚¸ãƒ“ãƒ¥ãƒ¼ï¼‰ã‚’ã‚«ã‚¦ãƒ³ãƒˆã—ã€ãƒ˜ãƒƒãƒ€ãƒ¼ã«è¡¨ç¤ºã—ã¾ã™ã€‚

---

## âœ¨ æ©Ÿèƒ½

### è¡¨ç¤ºå ´æ‰€
**ãƒ˜ãƒƒãƒ€ãƒ¼å³ä¸Š** - è¨€èªåˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³ã¨æ¥ç¶šçŠ¶æ…‹ã®é–“

```
[ğŸ® Esports ãƒ¯ãƒ¼ãƒ‰ã‚¦ãƒ«ãƒ•]  [æ—¥æœ¬èª][EN][í•œêµ­ì–´][ä¸­æ–‡]  [ğŸ‘ï¸ 1,234 views]  [âœ“ æ¥ç¶šä¸­]
```

### ç‰¹å¾´
- ğŸ“Š **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°**: èª°ã‹ãŒã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨å³åº§ã«æ•°å­—ãŒå¢—ãˆã‚‹
- ğŸ”¢ **ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Š**: 1,234 ã®ã‚ˆã†ã«èª­ã¿ã‚„ã™ãè¡¨ç¤º
- ğŸ”„ **è‡ªå‹•åŒæœŸ**: FirebaseçµŒç”±ã§å…¨ãƒ‡ãƒã‚¤ã‚¹ã§åŒã˜æ•°å­—ã‚’è¡¨ç¤º
- ğŸ›¡ï¸ **ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³**: åŒæ™‚ã‚¢ã‚¯ã‚»ã‚¹ã§ã‚‚æ­£ç¢ºã«ã‚«ã‚¦ãƒ³ãƒˆ

---

## ğŸ”§ å®Ÿè£…å†…å®¹

### 1. æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«: `js/pageview-counter.js`

```javascript
// ãƒšãƒ¼ã‚¸ãƒ“ãƒ¥ãƒ¼ã‚’ã‚«ã‚¦ãƒ³ãƒˆ
async function countPageView() {
  const db = firebase.database();
  const pageviewRef = db.ref('site_stats/pageviews');
  
  // ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã§å®‰å…¨ã«ã‚«ã‚¦ãƒ³ãƒˆ
  await pageviewRef.transaction((currentValue) => {
    return (currentValue || 0) + 1;
  });
}

// ãƒšãƒ¼ã‚¸ãƒ“ãƒ¥ãƒ¼æ•°ã‚’è¡¨ç¤º
function displayPageViews() {
  const db = firebase.database();
  const pageviewRef = db.ref('site_stats/pageviews');
  
  pageviewRef.on('value', (snapshot) => {
    const count = snapshot.val() || 0;
    document.getElementById('pageview-count').textContent = count.toLocaleString();
  });
}
```

---

### 2. HTMLå¤‰æ›´: `index.html`

**ãƒ˜ãƒƒãƒ€ãƒ¼ã«è¡¨ç¤ºè¦ç´ ã‚’è¿½åŠ **:
```html
<div id="pageview-display" style="display: flex; align-items: center; gap: 0.5rem;">
    <span>ğŸ‘ï¸</span>
    <span id="pageview-count">---</span>
    <span style="font-size: 0.8rem;">views</span>
</div>
```

**ã‚¹ã‚¯ãƒªãƒ—ãƒˆèª­ã¿è¾¼ã¿**:
```html
<script src="js/pageview-counter.js?v=22"></script>
```

---

### 3. Firebase Security Rulesæ›´æ–° âš ï¸ é‡è¦

Firebase Consoleã§ä»¥ä¸‹ã®ãƒ«ãƒ¼ãƒ«ã‚’è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š

```json
{
  "rules": {
    "rooms": {
      "$roomId": {
        ".read": true,
        ".write": true
      }
    },
    "demacia_rooms": {
      "$roomId": {
        ".read": true,
        ".write": true
      }
    },
    "site_stats": {
      "pageviews": {
        ".read": true,
        ".write": true
      }
    }
  }
}
```

---

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †

### ã‚¹ãƒ†ãƒƒãƒ—1: Firebase Security Rulesã‚’æ›´æ–°

1. **Firebase Consoleã«ã‚¢ã‚¯ã‚»ã‚¹**
   ```
   https://console.firebase.google.com/project/lol-word-wolf/database/lol-word-wolf-default-rtdb/rules
   ```

2. **ãƒ«ãƒ¼ãƒ«ã‚¨ãƒ‡ã‚£ã‚¿ã‚’é–‹ã**
   - å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ â†’ Realtime Database â†’ ãƒ«ãƒ¼ãƒ«

3. **ä»¥ä¸‹ã‚’è¿½åŠ **
   ```json
   "site_stats": {
     "pageviews": {
       ".read": true,
       ".write": true
     }
   }
   ```

4. **ã€Œå…¬é–‹ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯**

---

### ã‚¹ãƒ†ãƒƒãƒ—2: ã‚µã‚¤ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤

**Publishã‚¿ãƒ–ã§ãƒ‡ãƒ—ãƒ­ã‚¤**

---

### ã‚¹ãƒ†ãƒƒãƒ—3: å‹•ä½œç¢ºèª

1. ã‚µã‚¤ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹
2. ãƒ˜ãƒƒãƒ€ãƒ¼å³ä¸Šã« `ğŸ‘ï¸ 1 views` ãŒè¡¨ç¤ºã•ã‚Œã‚‹
3. åˆ¥ã®ãƒ–ãƒ©ã‚¦ã‚¶/ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆãƒ¢ãƒ¼ãƒ‰ã§é–‹ã
4. æ•°å­—ãŒ `2 views` ã«å¢—ãˆã‚‹
5. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§æ›´æ–°ã•ã‚Œã‚Œã°OK

---

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

Firebase Realtime Databaseã«ä»¥ä¸‹ã®å½¢ã§ä¿å­˜ã•ã‚Œã¾ã™ï¼š

```
lol-word-wolf-default-rtdb
â”œâ”€â”€ rooms/
â”‚   â””â”€â”€ (æ—¢å­˜ã®ãƒ«ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿)
â”œâ”€â”€ demacia_rooms/
â”‚   â””â”€â”€ (æ—¢å­˜ã®ãƒ‡ãƒãƒ¼ã‚·ã‚¢ãƒ«ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿)
â””â”€â”€ site_stats/
    â””â”€â”€ pageviews: 1234  â† NEW!
```

---

## ğŸ¨ è¡¨ç¤ºãƒ‡ã‚¶ã‚¤ãƒ³

### ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—
```
[ğŸ® Esports ãƒ¯ãƒ¼ãƒ‰ã‚¦ãƒ«ãƒ•]       [æ—¥æœ¬èª][EN][í•œêµ­ì–´][ä¸­æ–‡]  ğŸ‘ï¸ 1,234 views  âœ“ æ¥ç¶šä¸­
```

### ãƒ¢ãƒã‚¤ãƒ«ï¼ˆãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ï¼‰
```
[ğŸ® Esports ãƒ¯ãƒ¼ãƒ‰ã‚¦ãƒ«ãƒ•]
[æ—¥æœ¬èª][EN][í•œêµ­ì–´][ä¸­æ–‡]
ğŸ‘ï¸ 1,234 views  âœ“ æ¥ç¶šä¸­
```

---

## ğŸ” ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### Q1. æ•°å­—ãŒè¡¨ç¤ºã•ã‚Œãªã„ï¼ˆ`---` ã®ã¾ã¾ï¼‰

**åŸå› **: Firebase Security RulesãŒæ›´æ–°ã•ã‚Œã¦ã„ãªã„

**è§£æ±º**:
1. Firebase Console â†’ Realtime Database â†’ ãƒ«ãƒ¼ãƒ«
2. `site_stats` ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ 
3. ã€Œå…¬é–‹ã€ã‚’ã‚¯ãƒªãƒƒã‚¯

---

### Q2. æ•°å­—ãŒå¢—ãˆãªã„

**åŸå› **: Firebaseã«æ¥ç¶šã§ãã¦ã„ãªã„

**ç¢ºèªäº‹é …**:
1. ãƒ˜ãƒƒãƒ€ãƒ¼å³ä¸ŠãŒã€Œâœ“ æ¥ç¶šä¸­ã€ã«ãªã£ã¦ã„ã‚‹ã‹
2. ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ï¼ˆF12ï¼‰ã§ã‚¨ãƒ©ãƒ¼ã‚’ç¢ºèª

---

### Q3. ãƒšãƒ¼ã‚¸ãƒ“ãƒ¥ãƒ¼ãŒ2å€ã«ãªã‚‹

**åŸå› **: ãƒªãƒ­ãƒ¼ãƒ‰æ™‚ã«2å›ã‚«ã‚¦ãƒ³ãƒˆã•ã‚Œã‚‹å¯èƒ½æ€§

**ã“ã‚Œã¯æ­£å¸¸ã§ã™**:
- ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿ = 1å›ã‚«ã‚¦ãƒ³ãƒˆ
- ã“ã‚ŒãŒãƒšãƒ¼ã‚¸ãƒ“ãƒ¥ãƒ¼ã®å®šç¾©ã§ã™

---

## ğŸ’¡ ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### è¡¨ç¤ºä½ç½®ã‚’å¤‰æ›´ã—ãŸã„

**ãƒ•ãƒƒã‚¿ãƒ¼ã«ç§»å‹•**:
```html
<footer>
  <div id="pageview-display">
    <span>ğŸ‘ï¸</span>
    <span id="pageview-count">---</span>
    <span>views</span>
  </div>
</footer>
```

---

### ã‚¢ã‚¤ã‚³ãƒ³ã‚’å¤‰æ›´ã—ãŸã„

```html
<!-- ç›®ã®ã‚¢ã‚¤ã‚³ãƒ³ -->
<span>ğŸ‘ï¸</span>

<!-- ä»–ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ -->
<span>ğŸ“Š</span>  <!-- ã‚°ãƒ©ãƒ• -->
<span>ğŸ‘¥</span>  <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ -->
<span>ğŸ”¥</span>  <!-- äººæ°— -->
<span>â­</span>  <!-- ã‚¹ã‚¿ãƒ¼ -->
```

---

### ã‚«ã‚¦ãƒ³ãƒˆæ–¹å¼ã‚’å¤‰æ›´ã—ãŸã„

**ãƒ¦ãƒ‹ãƒ¼ã‚¯ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆï¼ˆã‚»ãƒƒã‚·ãƒ§ãƒ³å˜ä½ï¼‰**:
```javascript
// LocalStorageã§ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
function countPageView() {
  const sessionKey = 'pageview_counted';
  
  // æ—¢ã«ã‚«ã‚¦ãƒ³ãƒˆæ¸ˆã¿ãªã‚‰ä½•ã‚‚ã—ãªã„
  if (sessionStorage.getItem(sessionKey)) {
    return;
  }
  
  // ã‚«ã‚¦ãƒ³ãƒˆå®Ÿè¡Œ
  const db = firebase.database();
  const pageviewRef = db.ref('site_stats/unique_visitors');
  
  await pageviewRef.transaction((currentValue) => {
    return (currentValue || 0) + 1;
  });
  
  // ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«è¨˜éŒ²
  sessionStorage.setItem(sessionKey, 'true');
}
```

---

## ğŸ“ˆ å°†æ¥ã®æ‹¡å¼µæ¡ˆ

### 1. çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
```javascript
site_stats/
  â”œâ”€â”€ pageviews: 1234           // ç·PVæ•°
  â”œâ”€â”€ unique_visitors: 567      // ãƒ¦ãƒ‹ãƒ¼ã‚¯è¨ªå•è€…
  â”œâ”€â”€ rooms_created: 89         // ä½œæˆã•ã‚ŒãŸãƒ«ãƒ¼ãƒ æ•°
  â”œâ”€â”€ games_played: 234         // ãƒ—ãƒ¬ã‚¤ã•ã‚ŒãŸã‚²ãƒ¼ãƒ æ•°
  â””â”€â”€ daily/
      â”œâ”€â”€ 2026-02-15: 123       // æ—¥åˆ¥PV
      â””â”€â”€ 2026-02-14: 456
```

### 2. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°
```javascript
// ç¾åœ¨ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°ã‚’è¡¨ç¤º
site_stats/
  â””â”€â”€ online_users/
      â”œâ”€â”€ user_abc123: timestamp
      â””â”€â”€ user_xyz789: timestamp
```

### 3. ã‚²ãƒ¼ãƒ ãƒ¢ãƒ¼ãƒ‰åˆ¥çµ±è¨ˆ
```javascript
site_stats/
  â”œâ”€â”€ wordwolf_games: 150
  â””â”€â”€ demacia_games: 84
```

---

## âš ï¸ æ³¨æ„äº‹é …

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- **ç¾åœ¨ã®å®Ÿè£…**: èª°ã§ã‚‚èª­ã¿æ›¸ãå¯èƒ½
- **å•é¡Œ**: æ‚ªæ„ã®ã‚ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ•°å­—ã‚’æ”¹ã–ã‚“å¯èƒ½
- **å¯¾ç­–æ¡ˆ**: Cloud Functionsã§ç®¡ç†ï¼ˆå°†æ¥çš„ï¼‰

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- **ç¾åœ¨ã®å®Ÿè£…**: å…¨ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰ã§ã‚«ã‚¦ãƒ³ãƒˆ
- **å½±éŸ¿**: Firebaseä½¿ç”¨é‡ãŒå¢—åŠ 
- **å¯¾ç­–**: ç„¡æ–™æ ï¼ˆ50,000å›/æ—¥ï¼‰ã§ååˆ†

### ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼
- **ç¾åœ¨ã®å®Ÿè£…**: å€‹äººæƒ…å ±ã¯åé›†ã—ã¦ã„ãªã„
- **å®‰å¿ƒ**: ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ã«æº–æ‹ 

---

## âœ… ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

å®Ÿè£…å®Œäº†ç¢ºèªï¼š

- [x] `js/pageview-counter.js` ä½œæˆ
- [x] `index.html` ã«HTMLè¦ç´ è¿½åŠ 
- [x] `index.html` ã«ã‚¹ã‚¯ãƒªãƒ—ãƒˆèª­ã¿è¾¼ã¿è¿½åŠ 
- [ ] Firebase Security Rules æ›´æ–°ï¼ˆ**æ‰‹å‹•ã§å®Ÿæ–½ãŒå¿…è¦**ï¼‰
- [ ] ã‚µã‚¤ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤
- [ ] å‹•ä½œç¢ºèª

---

## ğŸ“š é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [Firebase Realtime Database](https://firebase.google.com/docs/database)
- [Firebase Security Rules](https://firebase.google.com/docs/database/security)
- [Firebase Transactions](https://firebase.google.com/docs/database/web/read-and-write#save_data_as_transactions)

---

**å®Ÿè£…æ—¥**: 2026-02-15  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: v1.0.22  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: å®Ÿè£…å®Œäº†ï¼ˆFirebase Rulesã®æ‰‹å‹•æ›´æ–°ãŒå¿…è¦ï¼‰
