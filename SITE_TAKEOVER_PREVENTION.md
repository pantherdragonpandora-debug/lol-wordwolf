# ğŸ›¡ï¸ ã‚µã‚¤ãƒˆä¹—ã£å–ã‚Šé˜²æ­¢å¯¾ç­–ã‚¬ã‚¤ãƒ‰

## ğŸ“‹ æ¦‚è¦

ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€ã‚µã‚¤ãƒˆã®ä¹—ã£å–ã‚Šã‚’é˜²ããŸã‚ã®å…·ä½“çš„ãªå¯¾ç­–ã‚’èª¬æ˜ã—ã¾ã™ã€‚

---

## ğŸ¯ ä¸»ãªè„…å¨ã‚·ãƒŠãƒªã‚ª

### 1. Firebase ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¹—ã£å–ã‚Š ğŸ”´ é«˜ãƒªã‚¹ã‚¯
**æ”»æ’ƒæ–¹æ³•**: 
- Firebaseã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã¸ã®ä¸æ­£ã‚¢ã‚¯ã‚»ã‚¹
- APIã‚­ãƒ¼ã®æ‚ªç”¨

**å½±éŸ¿**:
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å…¨ä½“ã®å‰Šé™¤
- è¨­å®šã®å¤‰æ›´
- èª²é‡‘ã®æ‚ªç”¨

### 2. GitHub ãƒªãƒã‚¸ãƒˆãƒªã®ä¹—ã£å–ã‚Š ğŸ”´ é«˜ãƒªã‚¹ã‚¯
**æ”»æ’ƒæ–¹æ³•**:
- GitHubã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ä¹—ã£å–ã‚Š
- ã‚³ãƒ¼ãƒ‰ã®æ”¹ã–ã‚“

**å½±éŸ¿**:
- æ‚ªæ„ã®ã‚ã‚‹ã‚³ãƒ¼ãƒ‰ã®æŒ¿å…¥
- ã‚µã‚¤ãƒˆã®æ”¹ã–ã‚“
- ãƒãƒ«ã‚¦ã‚§ã‚¢ã®é…å¸ƒ

### 3. ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒã‚¤ã‚¸ãƒ£ãƒƒã‚¯ ğŸŸ¡ ä¸­ãƒªã‚¹ã‚¯
**æ”»æ’ƒæ–¹æ³•**:
- GitHub Pagesãƒ‰ãƒ¡ã‚¤ãƒ³ã®ä¹—ã£å–ã‚Š
- DNSã®æ”¹ã–ã‚“

**å½±éŸ¿**:
- ã‚µã‚¤ãƒˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ä¸èƒ½
- å½ã‚µã‚¤ãƒˆã¸ã®èª˜å°

---

## âœ… å®Ÿè£…ã™ã¹ãå¯¾ç­–ï¼ˆå„ªå…ˆåº¦é †ï¼‰

## ğŸ”´ æœ€å„ªå…ˆ: ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### 1. Google ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆFirebaseï¼‰ã®ä¿è­· â­â­â­

#### A. äºŒæ®µéšèªè¨¼ï¼ˆ2FAï¼‰ã®æœ‰åŠ¹åŒ– ã€å¿…é ˆã€‘

**æ‰‹é †**:
```
1. Google ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹
   https://myaccount.google.com/

2. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ â†’ 2æ®µéšèªè¨¼ãƒ—ãƒ­ã‚»ã‚¹

3. è¨­å®šæ–¹æ³•ã‚’é¸æŠ:
   æ¨å¥¨: èªè¨¼ã‚¢ãƒ—ãƒªï¼ˆGoogle Authenticatorã€Authyï¼‰
   ä»£æ›¿: SMSã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚­ãƒ¼

4. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚³ãƒ¼ãƒ‰ã‚’ä¿å­˜
   â†’ å°åˆ·ã—ã¦å®‰å…¨ãªå ´æ‰€ã«ä¿ç®¡
```

**åŠ¹æœ**: 
- âœ… ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æ¼æ´©ã§ã‚‚ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä¿è­·
- âœ… ä¸æ­£ãƒ­ã‚°ã‚¤ãƒ³ã®99.9%ã‚’é˜²æ­¢

#### B. ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®å¼·åŒ– ã€å¿…é ˆã€‘

**æ¨å¥¨è¨­å®š**:
```
é•·ã•: æœ€ä½16æ–‡å­—ä»¥ä¸Š
æ§‹æˆ: å¤§æ–‡å­—ãƒ»å°æ–‡å­—ãƒ»æ•°å­—ãƒ»è¨˜å·ã‚’æ··åœ¨
ä¾‹: kR9$mP2#vL8@nQ5!wX3

NGä¾‹:
- password123
- lol-wordwolf
- èª•ç”Ÿæ—¥ã‚„åå‰
```

**ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç®¡ç†ãƒ„ãƒ¼ãƒ«æ¨å¥¨**:
- 1Password
- Bitwarden
- LastPass

#### C. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚­ãƒ¼ã®ä½¿ç”¨ ã€æ¨å¥¨ã€‘

**ç‰©ç†ã‚­ãƒ¼**:
- YubiKey
- Google Titan Security Key

**ãƒ¡ãƒªãƒƒãƒˆ**:
- ãƒ•ã‚£ãƒƒã‚·ãƒ³ã‚°æ”»æ’ƒã«å¼·ã„
- æœ€ã‚‚å®‰å…¨ãªèªè¨¼æ–¹æ³•

#### D. å¾©æ—§ç”¨ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®è¨­å®š ã€å¿…é ˆã€‘

```
Google ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ â†’ å€‹äººæƒ…å ± â†’ é€£çµ¡å…ˆæƒ…å ±
â†’ å¾©æ—§ç”¨ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’è¿½åŠ 
```

#### E. ãƒ­ã‚°ã‚¤ãƒ³ã‚¢ãƒ©ãƒ¼ãƒˆã®æœ‰åŠ¹åŒ– ã€æ¨å¥¨ã€‘

```
Google ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ â†’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ â†’ ãƒ‡ãƒã‚¤ã‚¹ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã¨é€šçŸ¥
â†’ æ–°ã—ã„ãƒ‡ãƒã‚¤ã‚¹ã‹ã‚‰ã®ãƒ­ã‚°ã‚¤ãƒ³ã‚’é€šçŸ¥
```

---

### 2. GitHub ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ä¿è­· â­â­â­

#### A. äºŒæ®µéšèªè¨¼ï¼ˆ2FAï¼‰ã®æœ‰åŠ¹åŒ– ã€å¿…é ˆã€‘

**æ‰‹é †**:
```
1. GitHub â†’ Settings â†’ Password and authentication
   https://github.com/settings/security

2. Two-factor authentication â†’ Enable

3. è¨­å®šæ–¹æ³•:
   æ¨å¥¨: TOTP ã‚¢ãƒ—ãƒªï¼ˆAuthyã€Google Authenticatorï¼‰
   ä»£æ›¿: SMSã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚­ãƒ¼

4. ãƒªã‚«ãƒãƒªãƒ¼ã‚³ãƒ¼ãƒ‰ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
   â†’ å®‰å…¨ãªå ´æ‰€ã«ä¿ç®¡
```

#### B. ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®å¼·åŒ– ã€å¿…é ˆã€‘

Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¨åŒæ§˜ã®åŸºæº–ã‚’é©ç”¨

#### C. Personal Access Tokenï¼ˆPATï¼‰ã®ç®¡ç† ã€é‡è¦ã€‘

**ç¾åœ¨ä½¿ç”¨ä¸­ã®ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç¢ºèª**:
```
GitHub â†’ Settings â†’ Developer settings â†’ Personal access tokens
```

**æ¨å¥¨è¨­å®š**:
- âœ… æœ€å°é™ã®æ¨©é™ã®ã¿ä»˜ä¸
- âœ… æœ‰åŠ¹æœŸé™ã‚’è¨­å®šï¼ˆ90æ—¥æ¨å¥¨ï¼‰
- âœ… ä½¿ç”¨ã—ã¦ã„ãªã„ãƒˆãƒ¼ã‚¯ãƒ³ã¯å‰Šé™¤
- âœ… ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å®‰å…¨ã«ä¿ç®¡ï¼ˆãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç®¡ç†ãƒ„ãƒ¼ãƒ«ï¼‰

#### D. SSH ã‚­ãƒ¼ã®ç®¡ç† ã€æ¨å¥¨ã€‘

```
GitHub â†’ Settings â†’ SSH and GPG keys

æ¨å¥¨:
- å¤ã„ã‚­ãƒ¼ã‚’å‰Šé™¤
- ãƒ‘ã‚¹ãƒ•ãƒ¬ãƒ¼ã‚ºä»˜ãã‚­ãƒ¼ã‚’ä½¿ç”¨
- å®šæœŸçš„ã«ã‚­ãƒ¼ã‚’æ›´æ–°ï¼ˆå¹´1å›ï¼‰
```

#### E. ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç† ã€æ¨å¥¨ã€‘

```
GitHub â†’ Settings â†’ Sessions

å®šæœŸçš„ã«ç¢ºèª:
- ä¸æ˜ãªã‚»ãƒƒã‚·ãƒ§ãƒ³ã¯å‰Šé™¤
- ä½¿ç”¨ã—ã¦ã„ãªã„ãƒ‡ãƒã‚¤ã‚¹ã‹ã‚‰ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
```

---

## ğŸŸ¡ é«˜å„ªå…ˆ: Firebase ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¿è­·

### 3. Firebase ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ â­â­

#### A. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¡ãƒ³ãƒãƒ¼ã®ç®¡ç† ã€å¿…é ˆã€‘

**æ‰‹é †**:
```
Firebase Console â†’ Project Settings â†’ Users and permissions
https://console.firebase.google.com/project/lol-word-wolf/settings/iam

ç¢ºèªäº‹é …:
- ä¸è¦ãªãƒ¡ãƒ³ãƒãƒ¼ã‚’å‰Šé™¤
- å„ãƒ¡ãƒ³ãƒãƒ¼ã®æ¨©é™ã‚’æœ€å°é™ã«
- å®šæœŸçš„ã«ãƒ¡ãƒ³ãƒãƒ¼ãƒªã‚¹ãƒˆã‚’ç¢ºèªï¼ˆæœˆ1å›æ¨å¥¨ï¼‰
```

**æ¨å¥¨æ¨©é™è¨­å®š**:
```
æ‰€æœ‰è€…: è‡ªåˆ†ã®ã¿
ç·¨é›†è€…: ä¿¡é ¼ã§ãã‚‹é–‹ç™ºè€…ã®ã¿
é–²è¦§è€…: ãã®ä»–ã®ãƒ¡ãƒ³ãƒãƒ¼
```

#### B. Firebase Security Rules ã®å¼·åŒ– ã€é‡è¦ã€‘

**ç¾åœ¨ã®ãƒ«ãƒ¼ãƒ«**:
```json
{
  "rules": {
    "rooms": {
      "$roomId": {
        ".read": true,
        ".write": true
      }
    }
  }
}
```

**æ¨å¥¨: æ”¹å–„ç‰ˆãƒ«ãƒ¼ãƒ«**:
```json
{
  "rules": {
    "rooms": {
      "$roomId": {
        // èª­ã¿å–ã‚Šã¯èª°ã§ã‚‚å¯èƒ½
        ".read": true,
        
        // æ›¸ãè¾¼ã¿ã¯åˆ¶é™
        ".write": "!data.exists() || data.child('createdAt').val() > (now - 86400000)",
        
        // ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼
        ".validate": "newData.hasChildren(['players', 'gameState', 'createdAt'])",
        
        "players": {
          "$playerId": {
            "name": {
              ".validate": "newData.isString() && newData.val().length >= 1 && newData.val().length <= 20"
            },
            "vote": {
              ".validate": "newData.isString() || newData.val() === null"
            }
          }
        },
        
        "chat": {
          "$messageId": {
            ".validate": "newData.hasChildren(['sender', 'message', 'timestamp']) && newData.child('message').val().length <= 500 && newData.child('timestamp').val() <= now"
          }
        }
      }
    },
    
    "demacia_rooms": {
      "$roomId": {
        ".read": true,
        ".write": "!data.exists() || data.child('createdAt').val() > (now - 86400000)",
        ".validate": "newData.hasChildren(['players', 'gameState', 'createdAt'])"
      }
    }
  }
}
```

**æ”¹å–„ç‚¹**:
- âœ… 24æ™‚é–“ä»¥ä¸ŠçµŒéã—ãŸãƒ«ãƒ¼ãƒ ã¯æ›¸ãè¾¼ã¿ä¸å¯
- âœ… ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®æ¤œè¨¼
- âœ… æ–‡å­—åˆ—é•·ã®åˆ¶é™
- âœ… ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã®æ¤œè¨¼

**é©ç”¨æ–¹æ³•**:
```
Firebase Console â†’ Realtime Database â†’ Rules â†’ ä¸Šè¨˜ã‚’ã‚³ãƒ”ãƒš â†’ å…¬é–‹
```

#### C. ä½¿ç”¨é‡ã‚¢ãƒ©ãƒ¼ãƒˆã®è¨­å®š ã€é‡è¦ã€‘

**æ‰‹é †**:
```
Firebase Console â†’ Project Settings â†’ Usage and billing
â†’ Set budget & alerts

æ¨å¥¨ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š:
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹èª­ã¿å–ã‚Š: 50,000å›/æ—¥
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ›¸ãè¾¼ã¿: 10,000å›/æ—¥
- ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸: 100MB
- å¸¯åŸŸå¹…: 1GB/æœˆ

ã‚¢ãƒ©ãƒ¼ãƒˆ: 80%, 100%, 120%
```

**åŠ¹æœ**:
- ç•°å¸¸ãªä½¿ç”¨é‡ã‚’å³åº§ã«æ¤œçŸ¥
- æ”»æ’ƒã‚„æ‚ªç”¨ã‚’æ—©æœŸç™ºè¦‹
- äºˆæœŸã›ã¬èª²é‡‘ã‚’é˜²æ­¢

#### D. Cloud Functions ã® Monitoringï¼ˆå°†æ¥çš„ï¼‰ ã€æ¨å¥¨ã€‘

```javascript
// å¤ã„ãƒ«ãƒ¼ãƒ ã‚’è‡ªå‹•å‰Šé™¤
exports.cleanupOldRooms = functions.pubsub
  .schedule('every 24 hours')
  .onRun(async (context) => {
    const cutoff = Date.now() - (24 * 60 * 60 * 1000);
    const snapshot = await admin.database()
      .ref('rooms')
      .orderByChild('createdAt')
      .endAt(cutoff)
      .once('value');
    
    const updates = {};
    snapshot.forEach(child => {
      updates[child.key] = null;
    });
    
    await admin.database().ref('rooms').update(updates);
  });
```

---

## ğŸŸ¢ ä¸­å„ªå…ˆ: GitHub ãƒªãƒã‚¸ãƒˆãƒªã®ä¿è­·

### 4. ãƒªãƒã‚¸ãƒˆãƒªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ â­

#### A. Branch Protection Rules ã€æ¨å¥¨ã€‘

**æ‰‹é †**:
```
GitHub Repository â†’ Settings â†’ Branches â†’ Add rule

æ¨å¥¨è¨­å®š:
Branch name pattern: main ã¾ãŸã¯ gh-pages

âœ“ Require pull request reviews before merging
  - Required approvals: 1ï¼ˆè¤‡æ•°äººãƒãƒ¼ãƒ ã®å ´åˆï¼‰
  
âœ“ Require status checks to pass
  
âœ“ Require conversation resolution before merging

âœ“ Include administrators
```

**åŠ¹æœ**:
- ç›´æ¥ã®ã‚³ãƒŸãƒƒãƒˆã‚’é˜²æ­¢
- ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹ã®å¼·åˆ¶
- äº‹æ•…ã«ã‚ˆã‚‹ç ´å£Šçš„å¤‰æ›´ã‚’é˜²æ­¢

#### B. Dependabot Alerts ã€æ¨å¥¨ã€‘

**æœ‰åŠ¹åŒ–**:
```
GitHub Repository â†’ Settings â†’ Security & analysis

âœ“ Dependency graph
âœ“ Dependabot alerts
âœ“ Dependabot security updates
```

**åŠ¹æœ**:
- è„†å¼±æ€§ã®ã‚ã‚‹ä¾å­˜é–¢ä¿‚ã‚’æ¤œçŸ¥
- è‡ªå‹•çš„ã«ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚’ææ¡ˆ

#### C. Code Scanning ã€æ¨å¥¨ã€‘

```
GitHub Repository â†’ Security â†’ Code scanning

Setup CodeQL analysisï¼ˆç„¡æ–™ï¼‰
```

**åŠ¹æœ**:
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„†å¼±æ€§ã‚’è‡ªå‹•æ¤œå‡º
- SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã€XSSãªã©ã‚’æ¤œçŸ¥

#### D. Webhook Secret ã®è¨­å®š ã€æ¨å¥¨ã€‘

ã‚‚ã—GitHub Actionsã‚„å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆ:

```
GitHub Repository â†’ Settings â†’ Webhooks
â†’ å„Webhookã«Secret ã‚’è¨­å®š
```

---

## ğŸŸ¢ ä½å„ªå…ˆï¼ˆbut é‡è¦ï¼‰: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã®ä¿è­·

### 5. ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ™ãƒ«ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ– â­

#### A. Content Security Policy (CSP) ã®å®Ÿè£… ã€æ¨å¥¨ã€‘

**index.html ã«è¿½åŠ **:
```html
<head>
  <meta http-equiv="Content-Security-Policy" 
        content="default-src 'self'; 
                 script-src 'self' 'unsafe-inline' 
                   https://www.gstatic.com 
                   https://www.googleapis.com 
                   https://cdn.jsdelivr.net; 
                 style-src 'self' 'unsafe-inline' 
                   https://fonts.googleapis.com; 
                 font-src 'self' 
                   https://fonts.gstatic.com; 
                 img-src 'self' data: 
                   https://ddragon.leagueoflegends.com 
                   https://raw.communitydragon.org;
                 connect-src 'self' 
                   https://*.firebaseio.com 
                   https://*.googleapis.com 
                   wss://*.firebaseio.com;">
</head>
```

**åŠ¹æœ**:
- XSSæ”»æ’ƒã‚’é˜²æ­¢
- ä¸æ­£ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å®Ÿè¡Œã‚’é˜»æ­¢
- å¤–éƒ¨ãƒªã‚½ãƒ¼ã‚¹ã®èª­ã¿è¾¼ã¿ã‚’åˆ¶é™

#### B. Subresource Integrity (SRI) ã€æ¨å¥¨ã€‘

**CDN ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«è¿½åŠ **:
```html
<!-- Before -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- After -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0" 
        integrity="sha384-xyz123..." 
        crossorigin="anonymous"></script>
```

**åŠ¹æœ**:
- CDNã®æ”¹ã–ã‚“ã‚’æ¤œçŸ¥
- ä¿¡é ¼ã§ãã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã¿å®Ÿè¡Œ

**SRI ãƒãƒƒã‚·ãƒ¥ã®ç”Ÿæˆ**:
```bash
# ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«
https://www.srihash.org/

# ã¾ãŸã¯
curl https://cdn.jsdelivr.net/npm/chart.js@4.4.0 | openssl dgst -sha384 -binary | openssl base64 -A
```

#### C. ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã®å®Ÿè£… ã€æ¨å¥¨ã€‘

**js/security.js ã‚’æ–°è¦ä½œæˆ**:
```javascript
// ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã‚¯ãƒ©ã‚¹
class RateLimiter {
  constructor() {
    this.limits = new Map();
  }
  
  check(action, cooldown = 1000) {
    const now = Date.now();
    const lastAction = this.limits.get(action) || 0;
    
    if (now - lastAction < cooldown) {
      console.warn(`âš ï¸ ãƒ¬ãƒ¼ãƒˆåˆ¶é™: ${action} ã¯ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³ä¸­`);
      return false;
    }
    
    this.limits.set(action, now);
    return true;
  }
  
  reset(action) {
    this.limits.delete(action);
  }
}

// ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
window.rateLimiter = new RateLimiter();
```

**ä½¿ç”¨ä¾‹ï¼ˆjs/main.js ã§ï¼‰**:
```javascript
// ãƒ«ãƒ¼ãƒ ä½œæˆ
async function createRoom() {
  if (!rateLimiter.check('createRoom', 5000)) {
    alert('ãƒ«ãƒ¼ãƒ ä½œæˆãŒæ—©ã™ãã¾ã™ã€‚5ç§’å¾Œã«ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚');
    return;
  }
  // ... æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰
}

// ãƒãƒ£ãƒƒãƒˆé€ä¿¡
function sendMessage(message) {
  if (!rateLimiter.check('sendMessage', 1000)) {
    return; // ç„¡è¨€ã§ç„¡è¦–
  }
  // ... æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰
}

// æŠ•ç¥¨
function vote(target) {
  if (!rateLimiter.check('vote', 2000)) {
    alert('æŠ•ç¥¨ãŒæ—©ã™ãã¾ã™');
    return;
  }
  // ... æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰
}
```

#### D. å…¥åŠ›ã‚µãƒ‹ã‚¿ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ ã€æ¨å¥¨ã€‘

**js/security.js ã«è¿½åŠ **:
```javascript
// å…¥åŠ›ã‚µãƒ‹ã‚¿ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³
function sanitizeInput(input, maxLength = 100) {
  if (typeof input !== 'string') {
    return '';
  }
  
  return input
    .trim()                           // å‰å¾Œã®ç©ºç™½ã‚’å‰Šé™¤
    .replace(/[<>'"]/g, '')          // å±é™ºãªæ–‡å­—ã‚’å‰Šé™¤
    .replace(/javascript:/gi, '')    // javascript: ã‚’å‰Šé™¤
    .replace(/on\w+=/gi, '')         // ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã‚’å‰Šé™¤
    .substring(0, maxLength);        // æœ€å¤§é•·ã‚’åˆ¶é™
}

// ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«å…¬é–‹
window.sanitizeInput = sanitizeInput;
```

**ä½¿ç”¨ä¾‹**:
```javascript
// ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å
const playerName = sanitizeInput(
  document.getElementById('player-name').value, 
  20
);

// ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
const message = sanitizeInput(
  document.getElementById('chat-input').value, 
  500
);
```

---

## ğŸ“Š ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### ğŸ”´ æœ€å„ªå…ˆï¼ˆä»Šã™ãå®Ÿæ–½ï¼‰

- [ ] **Google ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®2FAæœ‰åŠ¹åŒ–**
- [ ] **GitHub ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®2FAæœ‰åŠ¹åŒ–**
- [ ] **å¼·åŠ›ãªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã«å¤‰æ›´**
- [ ] **ãƒªã‚«ãƒãƒªãƒ¼ã‚³ãƒ¼ãƒ‰ã®ä¿å­˜**

### ğŸŸ¡ é«˜å„ªå…ˆï¼ˆä»Šé€±ä¸­ã«å®Ÿæ–½ï¼‰

- [ ] **Firebase ä½¿ç”¨é‡ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š**
- [ ] **Firebase Security Rules å¼·åŒ–**
- [ ] **Firebase ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¡ãƒ³ãƒãƒ¼ç¢ºèª**
- [ ] **GitHub Personal Access Token ç¢ºèª**

### ğŸŸ¢ ä¸­å„ªå…ˆï¼ˆä»Šæœˆä¸­ã«å®Ÿæ–½ï¼‰

- [ ] **CSP ãƒ˜ãƒƒãƒ€ãƒ¼å®Ÿè£…**
- [ ] **ãƒ¬ãƒ¼ãƒˆåˆ¶é™å®Ÿè£…**
- [ ] **å…¥åŠ›ã‚µãƒ‹ã‚¿ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè£…**
- [ ] **GitHub Branch Protection è¨­å®š**

### ğŸ’¡ ä½å„ªå…ˆï¼ˆä½™è£•ãŒã‚ã‚Œã°ï¼‰

- [ ] **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚­ãƒ¼ã®è³¼å…¥**
- [ ] **SRI ãƒãƒƒã‚·ãƒ¥è¿½åŠ **
- [ ] **Dependabot æœ‰åŠ¹åŒ–**
- [ ] **Code Scanning æœ‰åŠ¹åŒ–**

---

## ğŸš¨ ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå¯¾å¿œãƒ—ãƒ©ãƒ³

### ã‚‚ã—ä¹—ã£å–ã‚‰ã‚ŒãŸã‚‰...

#### 1. å³åº§ã«å®Ÿæ–½ï¼ˆ5åˆ†ä»¥å†…ï¼‰

**A. ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç¢ºä¿**
```
1. ã™ã¹ã¦ã®ãƒ‡ãƒã‚¤ã‚¹ã‹ã‚‰ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
2. ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¤‰æ›´
3. 2FAã‚’ãƒªã‚»ãƒƒãƒˆãƒ»å†è¨­å®š
```

**B. Firebase ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¿è­·**
```
1. Firebase Console â†’ Project Settings â†’ Users
   â†’ ä¸å¯©ãªãƒ¡ãƒ³ãƒãƒ¼ã‚’å‰Šé™¤

2. Realtime Database â†’ Rules
   â†’ ä¸€æ™‚çš„ã« ".write": false ã«å¤‰æ›´

3. API ã‚­ãƒ¼ã‚’å†ç”Ÿæˆ
   Google Cloud Console â†’ APIs & Services â†’ Credentials
```

**C. GitHub ãƒªãƒã‚¸ãƒˆãƒªã®ä¿è­·**
```
1. ä¸å¯©ãªã‚³ãƒŸãƒƒãƒˆã‚’ç¢ºèª
   git log --all --oneline

2. ãƒªãƒã‚¸ãƒˆãƒªã‚’ä¸€æ™‚çš„ã«ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã«

3. æœ€å¾Œã®å®‰å…¨ãªã‚³ãƒŸãƒƒãƒˆã«ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
   git reset --hard <safe-commit-hash>
   git push -f origin main
```

#### 2. èª¿æŸ»ï¼ˆ30åˆ†ä»¥å†…ï¼‰

**A. ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°ã®ç¢ºèª**
```
Google: https://myaccount.google.com/device-activity
GitHub: https://github.com/settings/security-log
Firebase: Firebase Console â†’ Authentication â†’ Users
```

**B. å¤‰æ›´å†…å®¹ã®ç¢ºèª**
```
GitHub: Compare â†’ Branches
Firebase: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆç¢ºèª
```

**C. å½±éŸ¿ç¯„å›²ã®ç‰¹å®š**
```
- ã‚³ãƒ¼ãƒ‰ã®æ”¹ã–ã‚“æœ‰ç„¡
- ãƒ‡ãƒ¼ã‚¿ã®å‰Šé™¤ãƒ»æ”¹å¤‰æœ‰ç„¡
- è¨­å®šã®å¤‰æ›´æœ‰ç„¡
- æ–™é‡‘ã¸ã®å½±éŸ¿
```

#### 3. å¾©æ—§ï¼ˆ1æ™‚é–“ä»¥å†…ï¼‰

**A. ã‚¯ãƒªãƒ¼ãƒ³ãªã‚³ãƒ¼ãƒ‰ã«ãƒªã‚¹ãƒˆã‚¢**
```bash
git revert <malicious-commits>
git push origin main
```

**B. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®å¾©æ—§**
```
Firebase Console â†’ Realtime Database â†’ Backups
â†’ æœ€å¾Œã®å®‰å…¨ãªãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰å¾©å…ƒ
```

**C. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šã®å†ç¢ºèª**
```
- Security Rules ã®ç¢ºèª
- APIåˆ¶é™ã®ç¢ºèª
- ãƒ¡ãƒ³ãƒãƒ¼æ¨©é™ã®ç¢ºèª
```

#### 4. äº‹å¾Œå¯¾å¿œ

**A. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–**
```
- 2FAã®å†è¨­å®š
- æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚­ãƒ¼ã®è¿½åŠ 
```

**B. ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°å¼·åŒ–**
```
- ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®šã®è¦‹ç›´ã—
- ãƒ­ã‚°ã®å®šæœŸç¢ºèª
```

**C. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°**
```
- ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆä½œæˆ
- å¯¾ç­–ã®æ–‡æ›¸åŒ–
```

---

## ğŸ“ ç·Šæ€¥é€£çµ¡å…ˆ

### Firebase ã‚µãƒãƒ¼ãƒˆ
```
Firebase Console â†’ Help â†’ Contact Support
https://firebase.google.com/support
```

### GitHub ã‚µãƒãƒ¼ãƒˆ
```
https://support.github.com/
```

### Google ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå¾©æ—§
```
https://accounts.google.com/signin/recovery
```

---

## ğŸ“š å‚è€ƒè³‡æ–™

- [Firebase Security Best Practices](https://firebase.google.com/docs/rules/basics)
- [GitHub Security Best Practices](https://docs.github.com/en/code-security)
- [OWASP Top 10](https://owasp.org/www-project-top-ten/)
- [Google Account Security](https://support.google.com/accounts/answer/46526)

---

## âœ… ã¾ã¨ã‚

### ä»Šã™ãã‚„ã‚‹ã¹ãã“ã¨ï¼ˆæ‰€è¦æ™‚é–“: 15åˆ†ï¼‰

1. âœ… **Google 2FA æœ‰åŠ¹åŒ–**ï¼ˆ5åˆ†ï¼‰
2. âœ… **GitHub 2FA æœ‰åŠ¹åŒ–**ï¼ˆ5åˆ†ï¼‰
3. âœ… **ãƒªã‚«ãƒãƒªãƒ¼ã‚³ãƒ¼ãƒ‰ä¿å­˜**ï¼ˆ5åˆ†ï¼‰

### ä»Šé€±ã‚„ã‚‹ã¹ãã“ã¨ï¼ˆæ‰€è¦æ™‚é–“: 30åˆ†ï¼‰

1. âœ… **Firebase ä½¿ç”¨é‡ã‚¢ãƒ©ãƒ¼ãƒˆ**ï¼ˆ10åˆ†ï¼‰
2. âœ… **Firebase Security Rules å¼·åŒ–**ï¼ˆ10åˆ†ï¼‰
3. âœ… **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¼·åŒ–**ï¼ˆ10åˆ†ï¼‰

### ä»Šæœˆã‚„ã‚‹ã¹ãã“ã¨ï¼ˆæ‰€è¦æ™‚é–“: 2æ™‚é–“ï¼‰

1. âœ… **ãƒ¬ãƒ¼ãƒˆåˆ¶é™å®Ÿè£…**ï¼ˆ30åˆ†ï¼‰
2. âœ… **CSP ãƒ˜ãƒƒãƒ€ãƒ¼å®Ÿè£…**ï¼ˆ30åˆ†ï¼‰
3. âœ… **å…¥åŠ›ã‚µãƒ‹ã‚¿ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³**ï¼ˆ30åˆ†ï¼‰
4. âœ… **GitHub Branch Protection**ï¼ˆ30åˆ†ï¼‰

---

**æœ€çµ‚æ›´æ–°**: 2026-02-15  
**æ¬¡å›è¦‹ç›´ã—**: 2026-03-15
