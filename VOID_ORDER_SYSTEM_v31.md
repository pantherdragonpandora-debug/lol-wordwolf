# ヴォイド順番選択システム改善 (v31)

**日時**: 2026-02-17  
**バージョン**: v31

---

## 🐛 修正した問題

### **問題1: 人数不足でもゲーム開始できる**
**修正**: `currentPlayers >= maxPlayers` で判定するように変更

```javascript
// v31の修正
const maxPlayers = roomData.maxPlayers || 4;
const canStart = currentPlayers >= maxPlayers; // ✅ 設定人数に達したらスタート可能
```

### **問題2: 順番選択が複雑**
**旧システム**: 各プレイヤーがドロップダウンで選択  
**新システム**: ホストがプレイヤー名をクリックした順番が回答順

---

## ✅ 新しい順番選択システム

### **ホスト（👑）の操作**
1. プレイヤー名をクリック → 順番リストに追加
2. 順番は「① ② ③」で表示
3. ✕ボタンで削除・やり直し可能
4. 全員選択 → 「この順番で開始」ボタン表示
5. クリック → ゲーム開始

### **非ホストの画面**
- ホストが決めた順番がリアルタイムで表示される
- 待つだけ（操作不要）

---

## 📊 修正前後の比較

| 項目 | v30 | v31 |
|-----|-----|-----|
| 人数チェック | ❌ 2人以上で開始可能 | ✅ 設定人数必須 |
| 順番決定者 | ❌ 各プレイヤー | ✅ ホストのみ |
| 操作方法 | ❌ ドロップダウン | ✅ クリック |
| 順番修正 | ❌ 不可 | ✅ ✕ボタンで削除 |

---

## 🧪 テスト手順

### **1. 人数チェックのテスト**
- 3人設定で2人 → ボタン非表示 ✅
- 3人目参加 → ボタン表示 ✅

### **2. 順番選択のテスト**
**ホスト**:
1. ゲーム開始クリック
2. プレイヤーを順にクリック
3. 「① ② ③」と表示される ✅
4. ✕ボタンで削除できる ✅
5. 全員選択 → 「この順番で開始」表示 ✅

**非ホスト**:
1. 順番がリアルタイムで表示される ✅
2. 待つだけ ✅

---

## 📝 変更ファイル

- `js/void-main.js` - 人数チェック + 順番選択システム全面書き換え
- `index.html` - 順番選択画面HTML全面書き換え
- バージョン: v30 → v31

---

**ステータス**: ✅ 完了 - Ctrl+Shift+R でリロードしてテストしてください
