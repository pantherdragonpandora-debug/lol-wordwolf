# 🔍 HTTPリファラー制限が見つからない場合の対処法

## 🎯 状況確認

APIキーの編集画面で「アプリケーションの制限」セクションが見つからない、または選択できない場合の対処法です。

---

## 📋 手順1: 正しい編集画面を開く

### 方法A: APIキーの編集画面を開く

1. 認証情報ページで、作成したばかりの新しいAPIキーを探す
2. APIキーの名前（例: API キー 1）をクリック

**または**

3. APIキーの右側の **︙** をクリック → **編集**

---

## 📸 正しい編集画面の見た目

編集画面が開いたら、以下のような構成になっているはずです：

```
┌──────────────────────────────────────────┐
│ API キーを編集                            │
├──────────────────────────────────────────┤
│ 名前                                      │
│ ┌────────────────────────────────────┐   │
│ │ API キー 1                         │   │
│ └────────────────────────────────────┘   │
│                                          │
│ キーの制限                               │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │
│                                          │
│ アプリケーションの制限                    │  👈 このセクションを探す
│ ◯ なし                                   │
│ ◯ HTTP リファラー（ウェブサイト）         │
│ ◯ IP アドレス（ウェブ サーバー、cron ...）│
│ ◯ Android アプリ                         │
│ ◯ iOS アプリ                             │
│                                          │
│ API の制限                               │  👈 このセクションも必要
│ ◯ 制限なし                               │
│ ◯ キーを制限                             │
│                                          │
└──────────────────────────────────────────┘
```

---

## 🐛 問題: 「アプリケーションの制限」が見つからない

### 原因1: ページを下にスクロールしていない

**解決策**: 
- 編集画面を**下にスクロール**してください
- 「名前」フィールドの下にあります

### 原因2: 別の種類の認証情報を編集している

**確認方法**:
- ページタイトルが「**API キーを編集**」になっているか確認
- 「OAuth 2.0 クライアント ID を編集」や「サービス アカウント」ではないか確認

**解決策**:
1. 左上の「← 認証情報」をクリックして戻る
2. **APIキー** セクションを探す（下にスクロール）
3. 正しいAPIキーを編集

### 原因3: モバイル表示になっている

**解決策**:
- ブラウザのウィンドウを広げる
- デスクトップモードで表示する

---

## ✅ 確実な方法: ステップバイステップ

### ステップ1: 認証情報ページに戻る

```
https://console.cloud.google.com/apis/credentials?project=lol-word-wolf
```

このリンクを開く

### ステップ2: ページを下にスクロール

「OAuth 2.0 クライアント ID」セクションを通過して、さらに下へ

### ステップ3: 「APIキー」セクションを見つける

```
APIキー
━━━━━━━━━━━━━━━━━━━━━━━━━
📌 API キー 1                           [編集アイコン]
   作成日: 2024/XX/XX
   AIzaXXXXXXXXXXXXXXXXXXX...
```

### ステップ4: APIキーの名前をクリック

「API キー 1」などの名前部分をクリック（キーの文字列ではなく）

### ステップ5: 編集画面が開く

画面を下にスクロールして「アプリケーションの制限」を見つける

---

## 🎯 代替案: 制限なしで使用する（非推奨だが動作する）

もしどうしても設定が見つからない場合、一時的な対処として：

### ⚠️ 制限なしで使用（リスクあり）

1. 「アプリケーションの制限」で **なし** を選択
2. 「API の制限」で **キーを制限** を選択
   - Firebase Realtime Database API
   - Identity Toolkit API
3. 保存

**注意**: 
- HTTPリファラー制限がないため、誰でもAPIキーを使用できる
- ただし、**API制限があれば**、Firebaseサービスのみに限定される
- Firebase Realtime Database は**セキュリティルール**で保護されている
- 最低限の安全性は確保される

**推奨**: できるだけHTTPリファラー制限を設定してください

---

## 📱 スクリーンショット付きガイド

### 認証情報ページ

```
┌────────────────────────────────────────────┐
│ Google Cloud Console                       │
│ APIとサービス > 認証情報                    │
├────────────────────────────────────────────┤
│                                            │
│ OAuth 2.0 クライアント ID                  │
│ （このセクションはスキップ）                │
│                                            │
│ ▼ ▼ ▼ 下にスクロール ▼ ▼ ▼                │
│                                            │
│ APIキー  ← ここを探す                      │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                                            │
│ 📌 API キー 1                 [編集]      │ ← ここをクリック
│    作成日: 2024/02/14                      │
│    AIzaXXXXXXXXXXXXXXXXX...               │
│                                            │
└────────────────────────────────────────────┘
```

### 編集画面（正しく開いた場合）

```
┌────────────────────────────────────────────┐
│ ← 認証情報   API キーを編集                │
├────────────────────────────────────────────┤
│ 名前                                        │
│ ┌──────────────────────────────────────┐   │
│ │ API キー 1                           │   │
│ └──────────────────────────────────────┘   │
│                                            │
│ ▼ ▼ ▼ 下にスクロール ▼ ▼ ▼                │
│                                            │
│ キーの制限                                 │
│                                            │
│ アプリケーションの制限  ← ここがある        │
│ ◯ なし                                     │
│ ◉ HTTP リファラー（ウェブサイト）           │
│   ┌──────────────────────────────────┐    │
│   │ https://...github.io/*           │    │
│   └──────────────────────────────────┘    │
│   [項目を追加]                             │
│                                            │
│ API の制限  ← ここもある                   │
│ ◯ 制限なし                                 │
│ ◉ キーを制限                               │
│   ☑ Firebase Realtime Database API       │
│   ☑ Identity Toolkit API                 │
│                                            │
│            [保存]  [キャンセル]             │
└────────────────────────────────────────────┘
```

---

## 🆘 それでも見つからない場合

### 最終手段: ブラウザのキャッシュをクリア

1. **Ctrl + Shift + Delete** (Windows) / **Cmd + Shift + Delete** (Mac)
2. キャッシュをクリア
3. Google Cloud Console に再ログイン
4. もう一度試す

### または: 別のブラウザで試す

- Chrome で見えない → Firefox や Edge で試す
- プライベート/シークレットモードで開く

---

## 📞 現在どの画面にいますか？

以下を教えてください：

### 質問1: ページのタイトルは？
- [ ] 「API キーを編集」
- [ ] 「OAuth 2.0 クライアント ID を編集」
- [ ] 「認証情報」
- [ ] その他: ___________

### 質問2: 見えているセクションは？
- [ ] 名前（入力欄）
- [ ] キーの制限
- [ ] アプリケーションの制限
- [ ] API の制限
- [ ] 何も見えない

### 質問3: APIキーは作成済み？
- [ ] はい（新しいAPIキーができている）
- [ ] いいえ（まだ作成していない）
- [ ] わからない

---

## ✅ 簡易チェックリスト

- [ ] 認証情報ページを開いた
- [ ] ページを下にスクロールして「APIキー」セクションを探した
- [ ] APIキーの名前（「API キー 1」など）をクリックした
- [ ] 編集画面が開いた
- [ ] ページタイトルが「API キーを編集」になっている
- [ ] 画面を下にスクロールした
- [ ] 「アプリケーションの制限」セクションを探した

---

**どこで詰まっているか教えていただければ、より具体的にサポートします！**

例:
- 「APIキーのセクションが見つからない」
- 「編集画面は開いたが、下にスクロールしても何もない」
- 「『アプリケーションの制限』という文字が画面にない」

現在の画面のスクリーンショットがあれば、さらに正確にサポートできます。
