<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- キャッシュ制御 -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <title>Esports ワードウルフ - LOL & VALORANT</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="css/style.css?v=13">
    <link rel="stylesheet" href="css/demacia-style.css?v=13">
    <link rel="stylesheet" href="css/void-style.css?v=23">
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6628280908520822"
         crossorigin="anonymous"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
</head>
<body>
    <!-- ヘッダー -->
    <header>
        <div class="header-content">
            <h1 id="site-title" data-i18n="header.title" style="cursor: pointer;">🎮 Esports ワードウルフ</h1>
            <div style="display: flex; align-items: center; gap: 1rem;">
                <div class="language-switcher">
                    <button class="lang-btn" data-lang="ja" onclick="changeLanguage('ja')">日本語</button>
                    <button class="lang-btn" data-lang="en" onclick="changeLanguage('en')">EN</button>
                    <button class="lang-btn" data-lang="ko" onclick="changeLanguage('ko')">한국어</button>
                    <button class="lang-btn" data-lang="zh" onclick="changeLanguage('zh')">中文</button>
                </div>
                <div id="pageview-display" style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.9rem; color: var(--text-color); opacity: 0.8;">
                    <span>👁️</span>
                    <span id="pageview-count">---</span>
                    <span style="font-size: 0.8rem;">views</span>
                </div>
                <div id="connection-status" class="connection-status" data-i18n="header.connection.connecting">接続中...</div>
            </div>
        </div>
    </header>

    <!-- メインコンテンツ -->
    <main>
        <!-- モード選択画面（最初の画面） -->
        <div id="mode-select-screen" class="screen active">
            <div class="card">
                <h2 data-i18n="modeSelect.title">ゲームモード選択</h2>
                <p style="text-align: center; margin-bottom: 2rem; color: var(--text-color);" data-i18n="modeSelect.subtitle">どのモードで遊びますか？</p>
                
                <div class="mode-selection-grid">
                    <button id="select-wordwolf-mode-btn" class="mode-card">
                        <img src="images/wordwolf-icon.jpg" alt="ワードウルフ" class="mode-icon-image">
                        <h3 class="mode-title" data-i18n="modeSelect.wordwolf">ワードウルフ</h3>
                        <p class="mode-description" data-i18n="modeSelect.wordwolfDesc">少数派のウルフを見つけ出すゲーム</p>
                        <p class="mode-players" data-i18n="modeSelect.wordwolfPlayers">👥 3〜6人</p>
                    </button>
                    
                    <button id="select-demacia-mode-btn" class="mode-card">
                        <img src="images/demacia-icon.jpg" alt="デマーシアに心を込めて" class="mode-icon-image">
                        <h3 class="mode-title" data-i18n="modeSelect.demacia">デマーシアに心を込めて</h3>
                        <p class="mode-description" data-i18n="modeSelect.demaciaDesc">セリフを演技して当ててもらうゲーム</p>
                        <p class="mode-players" data-i18n="modeSelect.demaciaPlayers">👥 3〜10人</p>
                    </button>
                    
                    <button id="select-void-mode-btn" class="mode-card void-mode-card">
                        <img src="images/void-icon.jpg" alt="ヴォイドに届くは光か闇か" class="mode-icon-image">
                        <h3 class="mode-title" data-i18n="modeSelect.void">ヴォイドに届くは光か闇か</h3>
                        <p class="mode-description" data-i18n="modeSelect.voidDesc">連想ワードを伝えてテーマを当てるゲーム</p>
                        <p class="mode-players" data-i18n="modeSelect.voidPlayers">👥 2〜8人</p>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- ゲームタイプ選択画面 -->
        <div id="game-select-screen" class="screen">
            <div class="card">
                <div class="game-title-header">
                    <button id="back-to-mode-select-btn" class="btn-back">← <span data-i18n="gameSelect.backToMode">モード選択に戻る</span></button>
                    <h2 id="game-select-title" data-i18n="gameSelect.title">ゲームタイプ選択</h2>
                </div>
                <p style="text-align: center; margin-bottom: 2rem; color: var(--text-color);" data-i18n="gameSelect.subtitle">どのゲームで遊びますか？</p>
                
                <div class="game-selection">
                    <button id="select-lol-btn" class="game-select-btn lol-game">
                        <span class="game-icon">🎮</span>
                        <span class="game-name">League of Legends</span>
                        <span id="lol-desc" class="game-desc" data-i18n="gameSelect.lolDesc">チャンピオン・アイテム・スキル</span>
                    </button>
                    
                    <button id="select-valorant-btn" class="game-select-btn valorant-game">
                        <span class="game-icon">🔫</span>
                        <span class="game-name">VALORANT</span>
                        <span id="valorant-desc" class="game-desc" data-i18n="gameSelect.valorantDesc">エージェント・武器・マップ</span>
                    </button>
                    
                    <!-- TFTはワードウルフモードでのみ表示 -->
                    <button id="select-tft-btn" class="game-select-btn tft-game" style="display: none;">
                        <span class="game-icon">♟️</span>
                        <span class="game-name">Teamfight Tactics</span>
                        <span id="tft-desc" class="game-desc" data-i18n="gameSelect.tftDesc">ユニット・特性・アイテム</span>
                    </button>
                        <span class="game-desc" data-i18n="gameSelect.tftDesc">ユニット・特性・アイテム</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- ゲームモード選択画面 -->
        <div id="mode-select-screen" class="screen">
            <div class="card">
                <div class="game-title-header">
                    <button id="back-to-game-select-btn" class="btn-back">← <span data-i18n="home.backToSelect">ゲーム選択に戻る</span></button>
                    <h2 id="current-game-title" data-i18n="home.title">ゲームモード選択</h2>
                </div>
                
                <!-- ゲームモード選択 -->
                <div class="game-mode-selection">
                    <h3 data-i18n="home.selectMode">どのモードで遊びますか？</h3>
                    <div class="mode-buttons">
                        <button id="mode-wordwolf-btn" class="mode-btn">
                            <span class="mode-icon">🐺</span>
                            <span class="mode-name" data-i18n="home.modeWordwolf">ワードウルフ</span>
                            <span class="mode-desc" data-i18n="home.modeWordwolfDesc">少数派のウルフを見つけ出せ！</span>
                        </button>
                        <button id="mode-demacia-btn" class="mode-btn">
                            <span class="mode-icon">💖</span>
                            <span class="mode-name" data-i18n="home.modeDemacia">デマーシアに心を込めて</span>
                            <span class="mode-desc" data-i18n="home.modeDemaciaDesc">LOLのセリフを演技して当てろ！</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ホーム画面 -->
        <div id="home-screen" class="screen">
            <div class="card">
                <div class="game-title-header">
                    <button id="back-to-game-type-btn" class="btn-back">← <span data-i18n="home.backToGameType">ゲーム選択に戻る</span></button>
                    <h2 id="home-game-mode-title" data-i18n="home.title">ワードウルフゲーム</h2>
                </div>
                
                <button id="create-room-btn" class="btn-primary btn-full-width" data-i18n="home.create">ルームを作成</button>
                <button id="join-room-btn" class="btn-secondary btn-full-width" data-i18n="home.join">ルームに参加</button>
                <button id="rules-btn" class="btn-secondary btn-full-width" data-i18n="home.rules">ルール説明</button>
                
                <!-- デマーシア専用：ソロプレイモード -->
                <button id="solo-play-btn" class="btn-secondary btn-full-width" style="display:none; background: linear-gradient(135deg, #c89b3c 0%, #a67c2b 100%); color: #0a1428; font-weight: 600;">
                    <span data-i18n="home.soloPlay">🎭 ソロプレイ（配信者向け）</span>
                </button>
            </div>
        </div>

        <!-- ルーム作成画面 -->
        <div id="create-screen" class="screen">
            <div class="card">
                <h2 data-i18n="create.title">ルーム作成</h2>
                
                <div class="form-group">
                    <label for="create-player-name" data-i18n="create.playerName">プレイヤー名</label>
                    <input type="text" id="create-player-name" data-i18n="create.playerNamePlaceholder" placeholder="名前を入力" maxlength="20">
                </div>
                
                <div id="player-count-section" class="form-group">
                    <label for="player-count" data-i18n="create.playerCount">プレイ人数</label>
                    <select id="player-count">
                        <option value="3">3</option>
                        <option value="4" selected>4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="timer" data-i18n="create.timer">討論時間（分）</label>
                    <select id="timer">
                        <option value="3">3</option>
                        <option value="5" selected>5</option>
                        <option value="7">7</option>
                        <option value="10">10</option>
                        <option value="15">15</option>
                    </select>
                </div>
                
                <!-- ワードウルフ用：お題カテゴリー -->
                <div id="wordwolf-categories" class="form-group">
                    <label data-i18n="create.categories">お題カテゴリー</label>
                    <div id="category-checkboxes" class="checkbox-group">
                        <!-- LOL用カテゴリー（デフォルト） -->
                        <div class="checkbox-item lol-category">
                            <input type="checkbox" name="category" value="champions" id="cat-champions" checked>
                            <label for="cat-champions" data-i18n="create.category.champions">チャンピオン</label>
                        </div>
                        <div class="checkbox-item lol-category">
                            <input type="checkbox" name="category" value="items" id="cat-items" checked>
                            <label for="cat-items" data-i18n="create.category.items">アイテム</label>
                        </div>
                        <div class="checkbox-item lol-category">
                            <input type="checkbox" name="category" value="skills" id="cat-skills" checked>
                            <label for="cat-skills" data-i18n="create.category.skills">スキル・能力</label>
                        </div>
                        <div class="checkbox-item lol-category">
                            <input type="checkbox" name="category" value="map" id="cat-map" checked>
                            <label for="cat-map" data-i18n="create.category.map">マップ・レーン</label>
                        </div>
                        <div class="checkbox-item lol-category">
                            <input type="checkbox" name="category" value="spells" id="cat-spells" checked>
                            <label for="cat-spells" data-i18n="create.category.spells">スペル</label>
                        </div>
                        
                        <!-- VALORANT用カテゴリー -->
                        <div class="checkbox-item valorant-category" style="display:none;">
                            <input type="checkbox" name="category" value="agents" id="cat-agents" checked>
                            <label for="cat-agents" data-i18n="create.category.agents">エージェント</label>
                        </div>
                        <div class="checkbox-item valorant-category" style="display:none;">
                            <input type="checkbox" name="category" value="weapons" id="cat-weapons" checked>
                            <label for="cat-weapons" data-i18n="create.category.weapons">武器</label>
                        </div>
                        <div class="checkbox-item valorant-category" style="display:none;">
                            <input type="checkbox" name="category" value="abilities" id="cat-abilities" checked>
                            <label for="cat-abilities" data-i18n="create.category.abilities">アビリティ</label>
                        </div>
                        <div class="checkbox-item valorant-category" style="display:none;">
                            <input type="checkbox" name="category" value="maps" id="cat-maps" checked>
                            <label for="cat-maps" data-i18n="create.category.maps">マップ</label>
                        </div>
                        <div class="checkbox-item valorant-category" style="display:none;">
                            <input type="checkbox" name="category" value="terms" id="cat-terms" checked>
                            <label for="cat-terms" data-i18n="create.category.terms">ゲーム用語</label>
                        </div>
                        
                        <!-- TFT用カテゴリー -->
                        <div class="checkbox-item tft-category" style="display:none;">
                            <input type="checkbox" name="category" value="units" id="cat-units" checked>
                            <label for="cat-units" data-i18n="create.category.units">ユニット</label>
                        </div>
                        <div class="checkbox-item tft-category" style="display:none;">
                            <input type="checkbox" name="category" value="traits" id="cat-traits" checked>
                            <label for="cat-traits" data-i18n="create.category.traits">特性</label>
                        </div>
                        <div class="checkbox-item tft-category" style="display:none;">
                            <input type="checkbox" name="category" value="items" id="cat-tft-items" checked>
                            <label for="cat-tft-items" data-i18n="create.category.tftItems">アイテム</label>
                        </div>
                        <div class="checkbox-item tft-category" style="display:none;">
                            <input type="checkbox" name="category" value="tft_terms" id="cat-tft-terms" checked>
                            <label for="cat-tft-terms" data-i18n="create.category.tftTerms">ゲーム用語</label>
                        </div>
                    </div>
                </div>
                
                <!-- デマーシア用：シチュエーションジャンル -->
                <div id="demacia-genres" class="form-group" style="display:none;">
                    <label data-i18n="create.situationGenres">シチュエーションジャンル</label>
                    <div id="genre-checkboxes" class="checkbox-group">
                        <!-- LOL用ジャンル -->
                        <div class="checkbox-item lol-genre">
                            <input type="checkbox" name="genre" value="battle" id="genre-battle" checked>
                            <label for="genre-battle" data-i18n="create.genre.battle">戦闘シーン</label>
                        </div>
                        <div class="checkbox-item lol-genre">
                            <input type="checkbox" name="genre" value="victory" id="genre-victory" checked>
                            <label for="genre-victory" data-i18n="create.genre.victory">勝利・エース</label>
                        </div>
                        <div class="checkbox-item lol-genre">
                            <input type="checkbox" name="genre" value="emotion" id="genre-emotion" checked>
                            <label for="genre-emotion" data-i18n="create.genre.emotion">感情表現</label>
                        </div>
                        <div class="checkbox-item lol-genre">
                            <input type="checkbox" name="genre" value="strategy" id="genre-strategy" checked>
                            <label for="genre-strategy" data-i18n="create.genre.strategy">戦略・判断</label>
                        </div>
                        <div class="checkbox-item lol-genre">
                            <input type="checkbox" name="genre" value="teamwork" id="genre-teamwork" checked>
                            <label for="genre-teamwork" data-i18n="create.genre.teamwork">チームワーク</label>
                        </div>
                        <div class="checkbox-item lol-genre">
                            <input type="checkbox" name="genre" value="casual" id="genre-casual" checked>
                            <label for="genre-casual" data-i18n="create.genre.casual">カジュアル</label>
                        </div>
                        
                        <!-- VALORANT用ジャンル -->
                        <div class="checkbox-item valorant-genre" style="display:none;">
                            <input type="checkbox" name="genre" value="clutch" id="genre-clutch" checked>
                            <label for="genre-clutch" data-i18n="create.genre.clutch">クラッチ状況</label>
                        </div>
                        <div class="checkbox-item valorant-genre" style="display:none;">
                            <input type="checkbox" name="genre" value="ace" id="genre-ace" checked>
                            <label for="genre-ace" data-i18n="create.genre.ace">エース獲得</label>
                        </div>
                        <div class="checkbox-item valorant-genre" style="display:none;">
                            <input type="checkbox" name="genre" value="ability" id="genre-ability" checked>
                            <label for="genre-ability" data-i18n="create.genre.ability">アビリティ使用</label>
                        </div>
                        <div class="checkbox-item valorant-genre" style="display:none;">
                            <input type="checkbox" name="genre" value="teamwork-val" id="genre-teamwork-val" checked>
                            <label for="genre-teamwork-val" data-i18n="create.genre.teamworkVal">チーム連携</label>
                        </div>
                        <div class="checkbox-item valorant-genre" style="display:none;">
                            <input type="checkbox" name="genre" value="defuse" id="genre-defuse" checked>
                            <label for="genre-defuse" data-i18n="create.genre.defuse">設置・解除</label>
                        </div>
                        <div class="checkbox-item valorant-genre" style="display:none;">
                            <input type="checkbox" name="genre" value="humor" id="genre-humor" checked>
                            <label for="genre-humor" data-i18n="create.genre.humor">ユーモア</label>
                        </div>
                    </div>
                </div>
                
                <div class="button-group">
                    <button id="start-create-btn" class="btn-primary" data-i18n="create.createButton">作成</button>
                    <button id="back-from-create-btn" class="btn-secondary" data-i18n="create.back">戻る</button>
                </div>
            </div>
        </div>

        <!-- ルーム参加画面 -->
        <div id="join-screen" class="screen">
            <div class="card">
                <h2 data-i18n="join.title">ルームに参加</h2>
                
                <!-- 選択中のゲーム情報 -->
                <div class="form-group" style="background: rgba(11, 198, 227, 0.1); padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem;">
                    <div style="text-align: center;">
                        <span style="font-size: 0.9rem; color: var(--text-color); opacity: 0.8;">参加するゲーム</span>
                        <div id="join-game-info" style="font-size: 1.2rem; font-weight: 600; color: var(--primary-color); margin-top: 0.5rem;">
                            <!-- JavaScriptで動的に設定 -->
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="join-room-id" data-i18n="join.roomId">ルームID</label>
                    <input type="text" id="join-room-id" data-i18n="join.roomIdPlaceholder" placeholder="6桁のルームID" maxlength="6">
                </div>
                
                <div class="form-group">
                    <label for="join-player-name" data-i18n="join.playerName">プレイヤー名</label>
                    <input type="text" id="join-player-name" data-i18n="join.playerNamePlaceholder" placeholder="名前を入力" maxlength="20">
                </div>
                
                <div class="button-group">
                    <button id="start-join-btn" class="btn-primary" data-i18n="join.joinButton">参加</button>
                    <button id="back-from-join-btn" class="btn-secondary" data-i18n="join.back">戻る</button>
                </div>
            </div>
        </div>

        <!-- 待機室画面 -->
        <div id="waiting-screen" class="screen">
            <div class="card">
                <h2 data-i18n="waiting.title">待機室</h2>
                
                <!-- ゲーム情報 -->
                <div class="form-group" style="background: rgba(11, 198, 227, 0.1); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                    <div style="text-align: center;">
                        <div id="waiting-game-info" style="font-size: 1.1rem; font-weight: 600; color: var(--primary-color);">
                            <!-- JavaScriptで動的に設定 -->
                        </div>
                    </div>
                </div>
                
                <div class="room-info">
                    <div class="room-id"><span data-i18n="waiting.roomId">ルームID:</span> <span id="room-id-display">------</span></div>
                    <div class="room-url" id="room-url-display"></div>
                    <button id="copy-room-url-btn" class="btn-secondary btn-full-width" data-i18n="waiting.copyUrl">URLをコピー</button>
                </div>
                
                <div class="form-group">
                    <label data-i18n="waiting.players">参加プレイヤー</label>
                    <div id="players-list" class="players-list"></div>
                </div>
                
                <div class="button-group">
                    <button id="start-game-btn" class="btn-primary" style="display: none;" data-i18n="waiting.startGame">ゲーム開始</button>
                    <button id="leave-room-btn" class="btn-danger" data-i18n="waiting.leave">退出</button>
                </div>
            </div>
        </div>

        <!-- ゲーム画面 -->
        <div id="game-screen" class="screen">
            <div class="card">
                <h2 data-i18n="game.title">討論タイム</h2>
                
                <div class="timer">
                    <div class="timer-display" id="timer-display">00:00</div>
                </div>
                
                <div class="topic-display">
                    <img id="topic-image" class="topic-image" src="" alt="" style="display: none;">
                    <div class="topic-text" id="your-topic">-</div>
                </div>
                
                <div class="chat-container">
                    <div id="chat-messages" class="chat-messages"></div>
                    <div class="chat-input-group">
                        <input type="text" id="chat-input" data-i18n="game.chatPlaceholder" placeholder="メッセージを入力..." maxlength="100">
                        <button id="send-message-btn" class="btn-primary" data-i18n="game.send">送信</button>
                    </div>
                </div>
                
                <button id="end-discussion-btn" class="btn-primary btn-full-width" data-i18n="game.endDiscussion">投票へ進む</button>
            </div>
        </div>

        <!-- 投票画面 -->
        <div id="voting-screen" class="screen">
            <div class="card">
                <h2 data-i18n="voting.title">投票タイム</h2>
                
                <p style="text-align: center; margin-bottom: 1.5rem; color: var(--lol-text);" data-i18n="voting.question">
                    誰がウルフだと思いますか？
                </p>
                
                <!-- 投票状況表示 -->
                <div id="wordwolf-vote-status" style="text-align: center; margin-bottom: 1rem; padding: 0.5rem; background: rgba(255,215,0,0.1); border-radius: 8px; font-size: 0.9rem;">
                    <span id="wordwolf-vote-count">0</span> / <span id="wordwolf-total-players">0</span> 人が投票完了
                </div>
                
                <div id="vote-options" class="vote-options"></div>
                
                <button id="confirm-vote-btn" class="btn-primary btn-full-width" data-i18n="voting.confirm">投票確定</button>
            </div>
        </div>

        <!-- 結果画面 -->
        <div id="result-screen" class="screen">
            <div class="card">
                <h2 id="result-title" class="result-title" data-i18n="result.title">結果発表</h2>
                
                <div class="result-info">
                    <p id="wolf-reveal" data-i18n="result.wolfWas">ウルフは ？ でした</p>
                    <p id="voted-out" data-i18n="result.votedOut">追放されたのは ？ です</p>
                    
                    <div style="margin-top: 1.5rem;">
                        <label style="color: var(--primary-color); margin-bottom: 0.5rem; display: block;" data-i18n="result.topics">お題</label>
                        <p id="wolf-topic" style="color: var(--wolf-color); margin: 0.5rem 0;"></p>
                        <p id="citizen-topic" style="color: var(--citizen-color); margin: 0.5rem 0;"></p>
                    </div>
                    
                    <div style="margin-top: 1.5rem;">
                        <label style="color: var(--primary-color); margin-bottom: 0.5rem; display: block;" data-i18n="result.voteResults">投票結果</label>
                        <div id="vote-results"></div>
                    </div>
                </div>
                
                <div class="button-group">
                    <button id="play-again-btn" class="btn-primary" data-i18n="result.playAgain">もう一度</button>
                    <button id="back-to-home-btn" class="btn-secondary" data-i18n="result.backToHome">ホームへ</button>
                </div>
            </div>
        </div>

        <!-- デマーシアゲーム: 演技者選択画面 -->
        <div id="demacia-performer-selection-screen" class="screen">
            <div class="card">
                <h2 data-i18n="demacia.selectPerformerTitle">演技者を選択</h2>
                
                <div class="demacia-phrase-display">
                    <div class="phrase-label" data-i18n="demacia.phrase">セリフ:</div>
                    <div id="demacia-phrase-preview" class="demacia-phrase">デマーシアァァァァ！</div>
                    <div class="character-label" data-i18n="demacia.character">キャラクター:</div>
                    <div id="demacia-character-preview" class="demacia-character">ガレン</div>
                </div>
                
                <div class="performer-selection-mode">
                    <button id="random-performer-btn" class="btn-primary btn-full-width" data-i18n="demacia.randomPerformer">ランダムに選ぶ</button>
                    <div class="or-divider" data-i18n="demacia.or">または</div>
                    <div class="manual-performer-list" id="manual-performer-list"></div>
                </div>
            </div>
        </div>

        <!-- デマーシアゲーム: 演技画面 -->
        <div id="demacia-perform-screen" class="screen">
            <div class="card">
                <h2 data-i18n="demacia.performTitle">演技タイム</h2>
                
                <div class="timer-display">
                    <div id="demacia-timer" class="timer">01:30</div>
                </div>
                
                <div class="demacia-phrase-display">
                    <div class="phrase-label" data-i18n="demacia.phrase">セリフ:</div>
                    <div id="demacia-phrase" class="demacia-phrase">デマーシアァァァァ！</div>
                    <div class="character-label" data-i18n="demacia.character">キャラクター:</div>
                    <div id="demacia-character" class="demacia-character">ガレン</div>
                </div>
                
                <div class="situation-display">
                    <div class="situation-label" data-i18n="demacia.yourSituation">あなたのシチュエーション:</div>
                    <div id="demacia-situation" class="demacia-situation">ペンタキルを決めた時</div>
                    <div class="difficulty-badge" id="demacia-difficulty">難易度: Medium</div>
                </div>
                
                <div class="performer-info">
                    <div class="current-performer-label" data-i18n="demacia.currentPerformer">現在の演技者:</div>
                    <div id="current-performer-name" class="current-performer">プレイヤー1</div>
                </div>
                
                <div class="performer-instruction">
                    <p data-i18n="demacia.performInstruction">上記のシチュエーションで、このセリフを演技してください！</p>
                    <p data-i18n="demacia.performWaiting">他のプレイヤーは演技を見て、どのシチュエーションか推理してください。</p>
                </div>
                
                <button id="demacia-start-voting-btn" class="btn-primary btn-full-width" data-i18n="demacia.startVoting">投票を開始</button>
            </div>
        </div>

        <!-- デマーシアゲーム: 投票画面 -->
        <div id="demacia-voting-screen" class="screen">
            <div class="card">
                <h2 data-i18n="demacia.votingTitle">投票タイム</h2>
                
                <div class="demacia-phrase-display">
                    <div class="phrase-label" data-i18n="demacia.phrase">セリフ:</div>
                    <div id="demacia-voting-phrase" class="demacia-phrase">デマーシアァァァァ！</div>
                </div>
                
                <p class="voting-instruction" data-i18n="demacia.votingInstruction">
                    演技者はどのシチュエーションを演じていましたか？
                </p>
                
                <!-- 投票状況表示 -->
                <div id="demacia-vote-status" style="text-align: center; margin-bottom: 1rem; padding: 0.5rem; background: rgba(200,155,60,0.1); border-radius: 8px; font-size: 0.9rem;">
                    <span id="demacia-vote-count">0</span> / <span id="demacia-total-voters">0</span> 人が投票完了
                </div>
                
                <div id="demacia-situation-options" class="demacia-situation-options"></div>
                
                <button id="demacia-submit-vote-btn" class="btn-primary btn-full-width" data-i18n="demacia.submitVote">投票する</button>
            </div>
        </div>

        <!-- デマーシアゲーム: 結果画面 -->
        <div id="demacia-result-screen" class="screen">
            <div class="card">
                <h2 data-i18n="demacia.resultTitle">ラウンド結果</h2>
                
                <div id="demacia-round-results" class="demacia-round-results"></div>
                
                <div class="score-board">
                    <h3 data-i18n="demacia.scores">現在のスコア</h3>
                    <div id="demacia-score-list"></div>
                </div>
                
                <button id="demacia-next-round-btn" class="btn-primary btn-full-width" data-i18n="demacia.nextRound">次のラウンドへ</button>
            </div>
        </div>
        
        <!-- デマーシアゲーム: ラウンド結果画面 -->
        <div id="demacia-round-result-screen" class="screen">
            <div class="card">
                <h2 data-i18n="demacia.roundResult">ラウンド結果</h2>
                
                <div class="demacia-phrase-display">
                    <div class="phrase-label" data-i18n="demacia.phrase">セリフ:</div>
                    <div id="demacia-round-result-phrase" class="demacia-phrase"></div>
                </div>
                
                <div class="result-info">
                    <p><strong data-i18n="demacia.correctSituation">正解:</strong></p>
                    <p id="demacia-correct-situation" class="correct-situation"></p>
                    
                    <p id="demacia-correct-count" class="correct-count"></p>
                    
                    <!-- 投票者の結果一覧 -->
                    <div id="demacia-voter-results" class="voter-results-container" style="margin-top: 1.5rem;"></div>
                </div>
                
                <div class="button-group">
                    <button id="demacia-next-round-btn" class="btn-primary btn-full-width" data-i18n="demacia.nextRound">次のラウンドへ</button>
                    <button id="demacia-show-results-btn" class="btn-secondary btn-full-width" data-i18n="demacia.showResults">最終結果を見る</button>
                </div>
            </div>
        </div>
        
        <!-- デマーシアゲーム: 最終結果画面 -->
        <div id="demacia-final-result-screen" class="screen">
            <div class="card">
                <h2 data-i18n="demacia.finalResults">最終結果</h2>
                
                <div id="demacia-final-rankings" class="rankings-container"></div>
                
                <div class="button-group">
                    <button id="demacia-play-again-btn" class="btn-primary" data-i18n="result.playAgain">もう一度</button>
                    <button id="demacia-back-to-home-btn" class="btn-secondary" data-i18n="result.backToHome">ホームへ</button>
                </div>
            </div>
        </div>

        <!-- デマーシアゲーム: ソロプレイ - セリフ表示画面 -->
        <div id="demacia-solo-phrase-screen" class="screen">
            <div class="card">
                <h2>🎭 セリフが決定しました</h2>
                
                <div class="demacia-phrase-display" style="margin: 2rem 0;">
                    <div class="phrase-label">セリフ:</div>
                    <div id="demacia-solo-phrase" class="demacia-phrase" style="font-size: 1.8rem; font-weight: bold;"></div>
                    <div id="demacia-solo-character" class="demacia-character" style="font-size: 1.2rem; color: rgba(255,255,255,0.7); margin-top: 0.5rem;"></div>
                </div>
                
                <div style="text-align: center; margin: 2rem 0; padding: 1.5rem; background: rgba(200,155,60,0.1); border-radius: 12px;">
                    <p style="font-size: 1.1rem; margin-bottom: 1rem;">
                        このセリフで演技を行います。<br>
                        次の画面でシチュエーションが表示されます。
                    </p>
                    <p style="color: rgba(255,255,255,0.7); font-size: 0.9rem;">
                        ⚠️ 視聴者に見えないようご注意ください
                    </p>
                </div>
                
                <button id="demacia-solo-show-situation-btn" class="btn-primary btn-full-width">
                    シチュエーションを確認する
                </button>
            </div>
        </div>

        <!-- デマーシアゲーム: ソロプレイ - シチュエーション確認画面 -->
        <div id="demacia-solo-situation-screen" class="screen">
            <div class="card">
                <h2 style="color: #c89b3c;">🎯 あなたのシチュエーション</h2>
                
                <div style="margin: 2rem 0; padding: 2rem; background: linear-gradient(135deg, rgba(200,155,60,0.2) 0%, rgba(200,155,60,0.05) 100%); border-radius: 12px; border: 2px solid rgba(200,155,60,0.3);">
                    <div style="text-align: center; margin-bottom: 1.5rem;">
                        <div class="phrase-label" style="font-size: 0.9rem;">セリフ:</div>
                        <div id="demacia-solo-situation-phrase" style="font-size: 1.5rem; font-weight: bold; margin: 0.5rem 0;"></div>
                    </div>
                    
                    <div style="text-align: center; padding: 2rem; background: rgba(0,0,0,0.3); border-radius: 8px;">
                        <div style="font-size: 0.9rem; color: rgba(255,255,255,0.6); margin-bottom: 0.5rem;">シチュエーション:</div>
                        <div id="demacia-solo-situation-text" style="font-size: 2rem; font-weight: bold; color: #c89b3c;"></div>
                        <div id="demacia-solo-situation-difficulty" style="margin-top: 1rem; font-size: 0.9rem; color: rgba(255,255,255,0.7);"></div>
                    </div>
                </div>
                
                <div style="text-align: center; margin: 1.5rem 0; padding: 1rem; background: rgba(255,215,0,0.1); border-radius: 8px;">
                    <p style="color: rgba(255,255,255,0.8);">
                        このシチュエーションで演技してください。<br>
                        準備ができたら「演技開始」を押してください。
                    </p>
                </div>
                
                <button id="demacia-solo-start-perform-btn" class="btn-primary btn-full-width">
                    演技開始
                </button>
            </div>
        </div>

        <!-- デマーシアゲーム: ソロプレイ - 演技中画面 -->
        <div id="demacia-solo-perform-screen" class="screen">
            <div class="card">
                <h2>🎭 演技中...</h2>
                
                <div class="demacia-phrase-display" style="margin: 2rem 0;">
                    <div class="phrase-label">セリフ:</div>
                    <div id="demacia-solo-perform-phrase" class="demacia-phrase" style="font-size: 1.8rem; font-weight: bold;"></div>
                </div>
                
                <div style="text-align: center; margin: 3rem 0; padding: 2rem; background: linear-gradient(135deg, rgba(200,155,60,0.1) 0%, rgba(200,155,60,0.05) 100%); border-radius: 12px;">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">🎬</div>
                    <p style="font-size: 1.2rem; margin-bottom: 1rem;">
                        視聴者にセリフを読んで演技してください
                    </p>
                    <p style="color: rgba(255,255,255,0.6); font-size: 0.9rem;">
                        シチュエーションは伝えないでください
                    </p>
                </div>
                
                <button id="demacia-solo-end-perform-btn" class="btn-primary btn-full-width">
                    演技終了
                </button>
            </div>
        </div>

        <!-- デマーシアゲーム: ソロプレイ - 正解選択画面 -->
        <div id="demacia-solo-answer-screen" class="screen">
            <div class="card">
                <h2>📝 正解のシチュエーションを選択</h2>
                
                <div class="demacia-phrase-display" style="margin: 2rem 0;">
                    <div class="phrase-label">セリフ:</div>
                    <div id="demacia-solo-answer-phrase" class="demacia-phrase"></div>
                </div>
                
                <div style="text-align: center; margin: 1.5rem 0; padding: 1rem; background: rgba(200,155,60,0.1); border-radius: 8px;">
                    <p style="color: rgba(255,255,255,0.8);">
                        視聴者のコメントを確認してから、<br>
                        正解のシチュエーションを選んでください。
                    </p>
                </div>
                
                <div id="demacia-solo-situation-options" class="demacia-situation-options" style="margin: 2rem 0;"></div>
                
                <button id="demacia-solo-reveal-answer-btn" class="btn-primary btn-full-width" disabled>
                    結果発表
                </button>
            </div>
        </div>

        <!-- デマーシアゲーム: ソロプレイ - 結果発表画面 -->
        <div id="demacia-solo-result-screen" class="screen">
            <div class="card">
                <h2>🎉 正解発表！</h2>
                
                <div class="demacia-phrase-display" style="margin: 2rem 0;">
                    <div class="phrase-label">セリフ:</div>
                    <div id="demacia-solo-result-phrase" class="demacia-phrase"></div>
                </div>
                
                <div class="result-info" style="margin: 2rem 0;">
                    <div style="text-align: center; padding: 2rem; background: linear-gradient(135deg, rgba(76,175,80,0.2) 0%, rgba(76,175,80,0.05) 100%); border-radius: 12px; border: 2px solid rgba(76,175,80,0.3);">
                        <p style="font-size: 1rem; color: rgba(255,255,255,0.7); margin-bottom: 0.5rem;">正解:</p>
                        <p id="demacia-solo-correct-situation" style="font-size: 2rem; font-weight: bold; color: #4caf50; margin: 1rem 0;"></p>
                        <p id="demacia-solo-difficulty" style="font-size: 0.9rem; color: rgba(255,255,255,0.6);"></p>
                    </div>
                </div>
                
                <div style="text-align: center; margin: 2rem 0; padding: 1.5rem; background: rgba(200,155,60,0.1); border-radius: 8px;">
                    <p style="font-size: 1.1rem; color: rgba(255,255,255,0.9);">
                        視聴者の皆さん、お疲れさまでした！
                    </p>
                </div>
                
                <div class="button-group">
                    <button id="demacia-solo-next-btn" class="btn-primary btn-full-width">
                        次のセリフで遊ぶ
                    </button>
                    <button id="demacia-solo-home-btn" class="btn-secondary btn-full-width">
                        ホームに戻る
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- 広告エリア（フッター上部） -->
    <div class="ad-container">
        <!-- Google AdSense バナー広告 -->
        <!-- ⚠️ 重要: 以下の手順で設定してください -->
        <!-- 1. 「ca-pub-XXXXXXXXXX」をあなたのAdSense IDに置き換え -->
        <!-- 2. 「YYYYYYYYYY」をAdSense管理画面で取得した広告スロットIDに置き換え -->
        <!-- 3. AdSense承認後、コメントアウトを外す -->
        <!--
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-XXXXXXXXXX"
             data-ad-slot="YYYYYYYYYY"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
        -->
    </div>

    <!-- ========================================
         ヴォイドに届くは光か闇か - 画面
         ======================================== -->
    
    <!-- ヴォイド - ホーム画面 -->
    <div id="void-home-screen" class="screen">
        <div class="void-card">
            <h2>🌌 ヴォイドに届くは光か闇か</h2>
            <p style="text-align: center; margin-bottom: 2rem; color: var(--void-light);">連想ワードを伝えてテーマを当てよう</p>
            
            <button id="void-create-room-btn" class="void-btn-primary btn-full-width" style="margin-bottom: 1rem;">ルームを作成</button>
            <button id="void-join-room-btn" class="void-btn-secondary btn-full-width" style="margin-bottom: 1rem;">ルームに参加</button>
            <button id="void-rules-btn" class="void-btn-secondary btn-full-width" style="margin-bottom: 1rem;">ルール説明</button>
            <button id="void-back-to-game-type-btn" class="void-btn-secondary btn-full-width">ゲーム選択に戻る</button>
        </div>
    </div>

    <!-- ヴォイド - ルーム作成画面 -->
    <div id="void-create-screen" class="screen">
        <div class="void-card">
            <h2>ルーム作成</h2>
            
            <div class="form-group">
                <label for="void-create-player-name">プレイヤー名</label>
                <input type="text" id="void-create-player-name" class="void-word-input" placeholder="名前を入力" maxlength="20">
            </div>
            
            <div class="form-group">
                <label for="void-max-players">参加人数</label>
                <select id="void-max-players" class="void-word-input">
                    <option value="2">2人</option>
                    <option value="3">3人</option>
                    <option value="4" selected>4人</option>
                    <option value="5">5人</option>
                    <option value="6">6人</option>
                    <option value="7">7人</option>
                    <option value="8">8人</option>
                </select>
            </div>
            
            <div class="form-group">
                <label>テーマ選択</label>
                <div style="display: flex; gap: 1rem; margin-top: 0.5rem;">
                    <label class="void-radio-label">
                        <input type="radio" name="void-theme-mode" value="random" checked>
                        <span>ランダム</span>
                    </label>
                    <label class="void-radio-label">
                        <input type="radio" name="void-theme-mode" value="select">
                        <span>選択</span>
                    </label>
                </div>
            </div>
            
            <button id="void-create-btn" class="void-btn-primary btn-full-width" style="margin-top: 1.5rem;">作成</button>
            <button id="void-cancel-create-btn" class="void-btn-secondary btn-full-width" style="margin-top: 1rem;">キャンセル</button>
        </div>
    </div>

    <!-- ヴォイド - ルーム参加画面 -->
    <div id="void-join-screen" class="screen">
        <div class="void-card">
            <h2>ルーム参加</h2>
            
            <div class="form-group">
                <label for="void-join-room-id">ルームID</label>
                <input type="text" id="void-join-room-id" class="void-word-input" placeholder="6桁の数字" maxlength="6">
            </div>
            
            <div class="form-group">
                <label for="void-join-player-name">プレイヤー名</label>
                <input type="text" id="void-join-player-name" class="void-word-input" placeholder="名前を入力" maxlength="20">
            </div>
            
            <button id="void-join-btn" class="void-btn-primary btn-full-width" style="margin-top: 1.5rem;">参加</button>
            <button id="void-cancel-join-btn" class="void-btn-secondary btn-full-width" style="margin-top: 1rem;">キャンセル</button>
        </div>
    </div>

    <!-- ヴォイド - 待機画面 -->
    <div id="void-waiting-screen" class="screen">
        <div class="void-card">
            <h2>ルーム: <span id="void-room-id-display">------</span></h2>
            
            <div class="void-player-list" id="void-player-list">
                <!-- プレイヤーリストが動的に追加される -->
            </div>
            
            <p style="text-align: center; color: var(--void-light); margin: 1.5rem 0;">
                <span id="void-current-players">0</span> / <span id="void-max-players-display">0</span> 人
            </p>
            
            <button id="void-start-game-btn" class="void-btn-primary btn-full-width" style="margin-top: 1.5rem; display: none;">ゲーム開始</button>
            <button id="void-leave-room-btn" class="void-btn-secondary btn-full-width" style="margin-top: 1rem;">退出</button>
        </div>
    </div>

    <!-- ヴォイド - プレイ画面（最初のプレイヤー） -->
    <div id="void-play-first-screen" class="screen">
        <div class="void-card">
            <div class="void-turn-indicator">あなたの番です (1/<span id="void-total-players-first">0</span>)</div>
            
            <div class="void-theme-display">
                <div class="void-theme-label">テーマ</div>
                <div class="void-theme-name" id="void-theme-name-display">-----</div>
            </div>
            
            <h3 style="color: var(--void-light); margin: 2rem 0 1rem;">連想する言葉を3つ入力:</h3>
            
            <div class="void-word-input-container">
                <div class="void-word-input-group">
                    <div class="void-word-number">1</div>
                    <input type="text" class="void-word-input" id="void-first-word-1" placeholder="1つ目の言葉" maxlength="30">
                </div>
                <div class="void-word-input-group">
                    <div class="void-word-number">2</div>
                    <input type="text" class="void-word-input" id="void-first-word-2" placeholder="2つ目の言葉" maxlength="30">
                </div>
                <div class="void-word-input-group">
                    <div class="void-word-number">3</div>
                    <input type="text" class="void-word-input" id="void-first-word-3" placeholder="3つ目の言葉" maxlength="30">
                </div>
            </div>
            
            <button id="void-submit-first-words-btn" class="void-btn-primary btn-full-width" style="margin-top: 2rem;">送信</button>
        </div>
    </div>

    <!-- ヴォイド - プレイ画面（中間プレイヤー） -->
    <div id="void-play-middle-screen" class="screen">
        <div class="void-card">
            <div class="void-turn-indicator">あなたの番です (<span id="void-current-turn-middle">0</span>/<span id="void-total-players-middle">0</span>)</div>
            
            <div class="void-previous-words">
                <h3>前の人が選んだ言葉:</h3>
                <div class="void-word-list" id="void-previous-word-list">
                    <!-- 前のワードが表示される -->
                </div>
            </div>
            
            <div class="void-modify-section">
                <h3>伝わりにくい言葉を修正:</h3>
                <div id="void-modify-options">
                    <!-- 修正オプションが動的に追加される -->
                </div>
            </div>
            
            <h3 style="color: var(--void-light); margin: 2rem 0 1rem;">新しい3つの言葉:</h3>
            
            <div class="void-word-input-container">
                <div class="void-word-input-group">
                    <div class="void-word-number">1</div>
                    <input type="text" class="void-word-input" id="void-middle-word-1" placeholder="1つ目の言葉" maxlength="30">
                </div>
                <div class="void-word-input-group">
                    <div class="void-word-number">2</div>
                    <input type="text" class="void-word-input" id="void-middle-word-2" placeholder="2つ目の言葉" maxlength="30">
                </div>
                <div class="void-word-input-group">
                    <div class="void-word-number">3</div>
                    <input type="text" class="void-word-input" id="void-middle-word-3" placeholder="3つ目の言葉" maxlength="30">
                </div>
            </div>
            
            <button id="void-submit-middle-words-btn" class="void-btn-primary btn-full-width" style="margin-top: 2rem;">送信</button>
        </div>
    </div>

    <!-- ヴォイド - プレイ画面（最後のプレイヤー） -->
    <div id="void-play-last-screen" class="screen">
        <div class="void-card">
            <div class="void-turn-indicator">最終回答 (<span id="void-total-players-last">0</span>/<span id="void-total-players-last-2">0</span>)</div>
            
            <div class="void-previous-words">
                <h3>前の人が選んだ言葉:</h3>
                <div class="void-word-list" id="void-last-previous-word-list">
                    <!-- 前のワードが表示される -->
                </div>
            </div>
            
            <h3 style="color: var(--void-light); margin: 2rem 0 1rem;">元のテーマは何だと思いますか？</h3>
            
            <input type="text" class="void-word-input" id="void-final-answer" placeholder="回答を入力" maxlength="30" style="width: 100%; font-size: 1.2rem;">
            
            <button id="void-submit-answer-btn" class="void-btn-primary btn-full-width" style="margin-top: 2rem;">回答</button>
        </div>
    </div>

    <!-- ヴォイド - 結果画面 -->
    <div id="void-result-screen" class="screen">
        <div class="void-card">
            <div class="void-result-header">
                <div id="void-result-icon" class="void-result-correct">🎉</div>
                <h2 id="void-result-title" style="color: var(--void-light);">正解！</h2>
            </div>
            
            <div class="void-answer-comparison">
                <div class="void-answer-box">
                    <div class="void-answer-label">元のテーマ</div>
                    <div class="void-answer-text" id="void-correct-answer">-----</div>
                </div>
                <div class="void-answer-box">
                    <div class="void-answer-label">あなたの回答</div>
                    <div class="void-answer-text" id="void-your-answer">-----</div>
                </div>
            </div>
            
            <h3 style="color: var(--void-light); margin: 2rem 0 1rem;">言葉の推移:</h3>
            
            <div class="void-word-history" id="void-word-history">
                <!-- ワードの推移が動的に追加される -->
            </div>
            
            <button id="void-play-again-btn" class="void-btn-primary btn-full-width" style="margin-top: 2rem;">もう一度遊ぶ</button>
            <button id="void-back-to-home-btn" class="void-btn-secondary btn-full-width" style="margin-top: 1rem;">ホームに戻る</button>
        </div>
    </div>

    <!-- フッター -->
    <footer>
        <div class="footer-content">
            <div class="footer-disclaimer">
                <p data-i18n="footer.fanMade">🎮 Riot Games（League of Legends / VALORANT）ファンによる非公式ゲームサイト</p>
                <p data-i18n="footer.notAffiliated">本サイトは Riot Games によって承認されたものではありませんが、Riot Games の Legal Jibber Jabber ポリシーに準拠して運営されています</p>
            </div>
            <div class="footer-links">
                <a href="privacy.html" data-i18n="footer.privacy">プライバシーポリシー</a>
                <span class="separator">|</span>
                <a href="terms.html" data-i18n="footer.terms">利用規約</a>
                <span class="separator">|</span>
                <a href="copyright.html" data-i18n="footer.copyright">著作権ポリシー</a>
                <span class="separator">|</span>
                <a href="faq.html">FAQ</a>
                <span class="separator">|</span>
                <a href="contact.html">お問い合わせ</a>
            </div>
            <div class="footer-copyright">
                <p>&copy; 2025 LOL Word Wolf Fan Site. All rights reserved.</p>
                <p class="small-text">League of Legends and Riot Games are trademarks or registered trademarks of Riot Games, Inc.</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <!-- バージョン管理（最初に読み込む） -->
    <script src="js/version.js?v=13"></script>
    <!-- Firebase診断ツール -->
    <script src="js/diagnosis.js?v=13"></script>
    <script src="js/firebase-config.js?v=13"></script>
    <!-- セキュリティ機能 -->
    <script src="js/security.js?v=22"></script>
    <script src="js/i18n.js?v=13"></script>
    <script src="js/data.js?v=13"></script>
    <script src="js/data-valorant.js?v=13"></script>
    <script src="js/data-tft.js?v=13"></script>
    <script src="js/data-i18n.js?v=13"></script>
    <script src="js/demacia-data.js?v=13"></script>
    <script src="js/demacia-data-valorant.js?v=18"></script>
    <script src="js/void-data.js?v=23"></script>
    <script src="js/game.js?v=18"></script>
    <script src="js/demacia-game.js?v=18"></script>
    <script src="js/void-game.js?v=23"></script>
    <script src="js/demacia-solo.js?v=18"></script>
    <script src="js/pageview-counter.js?v=22"></script>
    <script src="js/void-main.js?v=23"></script>
    <script src="js/main.js?v=23"></script>
</body>
</html>
