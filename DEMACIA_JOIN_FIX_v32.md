# ğŸ”¥ ãƒ‡ãƒãƒ¼ã‚·ã‚¢ã‚²ãƒ¼ãƒ  Firebaseæ¨©é™ã‚¨ãƒ©ãƒ¼ä¿®æ­£ã‚¬ã‚¤ãƒ‰

## ğŸš¨ å•é¡Œ

ãƒ‡ãƒãƒ¼ã‚·ã‚¢ã‚²ãƒ¼ãƒ ã®ãƒ«ãƒ¼ãƒ ä½œæˆæ™‚ã«ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿï¼š
```
PERMISSION_DENIED: Permission denied
```

## ğŸ” åŸå› 

Firebase Realtime Databaseã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ã§ `demacia_rooms` ã¸ã®æ›¸ãè¾¼ã¿æ¨©é™ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚

ç¾åœ¨ã®ãƒ«ãƒ¼ãƒ«ã¯ `rooms` ãƒ‘ã‚¹ã®ã¿è¨±å¯ã•ã‚Œã¦ã„ã‚‹ã¨æ€ã‚ã‚Œã¾ã™ã€‚

## âœ… ä¿®æ­£æ–¹æ³•

### 1. Firebaseã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ã‚¢ã‚¯ã‚»ã‚¹

1. https://console.firebase.google.com/ ã«ã‚¢ã‚¯ã‚»ã‚¹
2. `lol-word-wolf` ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é¸æŠ
3. å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€ŒRealtime Databaseã€ã‚’é¸æŠ
4. ã€Œãƒ«ãƒ¼ãƒ«ã€ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯

### 2. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ã‚’æ›´æ–°

**ç¾åœ¨ã®ãƒ«ãƒ¼ãƒ«ï¼ˆæ¨æ¸¬ï¼‰:**
```json
{
  "rules": {
    "rooms": {
      ".read": true,
      ".write": true
    }
  }
}
```

**ä¿®æ­£å¾Œã®ãƒ«ãƒ¼ãƒ«:**
```json
{
  "rules": {
    "rooms": {
      ".read": true,
      ".write": true
    },
    "demacia_rooms": {
      ".read": true,
      ".write": true
    }
  }
}
```

### 3. ã‚ˆã‚Šå®‰å…¨ãªãƒ«ãƒ¼ãƒ«ï¼ˆæ¨å¥¨ï¼‰

é–‹ç™ºæ®µéšãŒçµ‚ã‚ã£ãŸã‚‰ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚ˆã‚Šå®‰å…¨ãªãƒ«ãƒ¼ãƒ«ã«å¤‰æ›´ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ï¼š

```json
{
  "rules": {
    "rooms": {
      "$roomId": {
        ".read": true,
        ".write": true,
        ".validate": "newData.hasChildren(['host', 'players', 'settings', 'gameState'])"
      }
    },
    "demacia_rooms": {
      "$roomId": {
        ".read": true,
        ".write": true,
        ".validate": "newData.hasChildren(['host', 'players', 'settings', 'gameState'])"
      }
    }
  }
}
```

### 4. ãƒ«ãƒ¼ãƒ«ã‚’å…¬é–‹

1. ã€Œå…¬é–‹ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
2. å¤‰æ›´ãŒåæ˜ ã•ã‚Œã‚‹ã¾ã§æ•°ç§’å¾…ã¤

## ğŸ§ª å‹•ä½œç¢ºèª

ãƒ«ãƒ¼ãƒ«å¤‰æ›´å¾Œã€ä»¥ä¸‹ã‚’ç¢ºèªï¼š

1. ãƒ–ãƒ©ã‚¦ã‚¶ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ï¼ˆF5ï¼‰
2. ãƒ‡ãƒãƒ¼ã‚·ã‚¢ãƒ¢ãƒ¼ãƒ‰ã§ãƒ«ãƒ¼ãƒ ä½œæˆã‚’è©¦ã™
3. ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã« `âœ… ãƒ‡ãƒãƒ¼ã‚·ã‚¢ãƒ«ãƒ¼ãƒ ä½œæˆæˆåŠŸ` ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

## ğŸ“ ãã®ä»–ã®æ³¨æ„ç‚¹

### ãƒ¯ãƒ¼ãƒ‰ã‚¦ãƒ«ãƒ•ã¯å‹•ä½œã™ã‚‹ã®ã«ãƒ‡ãƒãƒ¼ã‚·ã‚¢ãŒå‹•ä½œã—ãªã„ç†ç”±

- ãƒ¯ãƒ¼ãƒ‰ã‚¦ãƒ«ãƒ•: `rooms/` ãƒ‘ã‚¹ã‚’ä½¿ç”¨ â†’ ãƒ«ãƒ¼ãƒ«ã§è¨±å¯ã•ã‚Œã¦ã„ã‚‹ âœ…
- ãƒ‡ãƒãƒ¼ã‚·ã‚¢: `demacia_rooms/` ãƒ‘ã‚¹ã‚’ä½¿ç”¨ â†’ ãƒ«ãƒ¼ãƒ«ã§è¨±å¯ã•ã‚Œã¦ã„ãªã„ âŒ

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã«ã¤ã„ã¦

ç¾åœ¨ã®è¨­å®šï¼ˆ`.read: true`, `.write: true`ï¼‰ã¯**é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆç”¨**ã§ã™ã€‚

æœ¬ç•ªç’°å¢ƒã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ«ãƒ¼ãƒ«ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ï¼š

```json
{
  "rules": {
    "rooms": {
      "$roomId": {
        ".read": true,
        "players": {
          "$playerId": {
            ".write": "!data.exists() || data.child('name').val() === $playerId"
          }
        },
        ".write": "!data.exists() || data.child('host').val() === auth.uid"
      }
    },
    "demacia_rooms": {
      "$roomId": {
        ".read": true,
        "players": {
          "$playerId": {
            ".write": "!data.exists() || data.child('name').val() === $playerId"
          }
        },
        ".write": "!data.exists() || data.child('host').val() === auth.uid"
      }
    }
  }
}
```

## ğŸ‰ å®Œäº†

ãƒ«ãƒ¼ãƒ«å¤‰æ›´å¾Œã€ãƒ‡ãƒãƒ¼ã‚·ã‚¢ã‚²ãƒ¼ãƒ ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã¯ãšã§ã™ï¼

ä½•ã‹å•é¡ŒãŒã‚ã‚Œã°ã€Firebaseã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã®ã€Œä½¿ç”¨çŠ¶æ³ã€ã‚¿ãƒ–ã§ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚
